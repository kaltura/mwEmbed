{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 0cfdcfac76abc342e787","webpack:///bundle.js","webpack:///./components/Hotspot.tsx","webpack:///./utils/logger.ts","webpack:///./utils/hotspots-engine.ts","webpack:///./components/Stage.tsx","webpack:///./player-v2/plugin.tsx","webpack:///../node_modules/preact/dist/preact.min.js","webpack:///../node_modules/preact-cli/lib/lib/entry.js"],"names":["root","factory","exports","module","define","amd","a","i","self","this","__webpack_require__","moduleId","installedModules","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","CUnC","__webpack_exports__","prepareUrl","url","match","enableLog","prefix","logPrefix","isEnabled","log","level","context","message","optionalParams","_i","arguments","length","console","apply","__spreadArrays","scaleVideo","videoWidth","videoHeight","playerWidth","playerHeight","fLetterBox","result","width","height","left","top","scaleToTargetWidth","scaleX1","scaleY1","scaleX2","scaleY2","fScaleOnWidth","Math","abs","value","ChangeTypes","preact_min","__extends","extendStatics","b","setPrototypeOf","__proto__","Array","__","constructor","create","__assign","assign","t","defaultContainerStyles","position","display","boxSizing","defaultButtonsStyles","appearance","border","verticalAlign","textAlign","cursor","wordBreak","defaultProps","styles","_super","Hotspot","_this","state","disableClick","isReady","isClickable","onClick","props","hotspot","type","jumpToTime","handleClick","seekTo","window","open","sendAnalytics","eventNumber","target","hotspotId","id","pauseVideo","e","handleKeyUp","event","keyCode","componentDidMount","setState","render","layout","label","_a","visible","containerStyles","y","x","buttonStyles","onKeyUp","tabIndex","role","style","il","r","k","j","jl","NotifyEventTypes","HotspotsEngine","hotspots","isFirstTime","hotspotsLayoutReady","lastHandledTime","lastHandledTimeIndex","nextTimeToHandle","hotspotsChanges","playerSize","videoSize","prepareHotspots","updateLayout","recalculateHotspotsLayout","createHotspotsSnapshot","_calculateLayout","scaleCalculation","rawLayout","relativeX","relativeY","relativeWidth","relativeHeight","_b","forEach","getSnapshot","time","timeIndex","findClosestLastIndexByTime","updateTime","currentTime","forceSnapshot","snapshot","userSeeked","hasChangesToHandle","closestChangeIndex","closestChangeTime","delta","createEmptyDelta","updateInternals","createHotspotsDelta","targetIndex","hotspotsCount","index","item","hotspotIndex","indexOf","cuePoint","Show","push","splice","newHotspots","removedHotspots","show","hide","isIndexOfLastChange","isIndexBeforeTheFirstChange","binarySearch","items","lo","hi","mid","floor","min","changes","closestIndex","changesLength","startTime","endTime","Hide","sort","Stage","engine","initialState","isLoading","getPlayerSize","getVideoSize","visibleHotspots","showHotspots","hasError","notify","Monitor","Seeked","syncVisibleHotspots","_handleCuepoints","error","handleResize","reset","loadCuePoints","renderHotspots","visualHotspot","map","hotspotData","key","getCurrentTime","hotspotsUpdate","visibleHotspots_1","hotspotsElements","overflow","__rest","getOwnPropertySymbols","propertyIsEnumerable","mw","toObject","jsonAsString","defaultValue","JSON","parse","isIpad","navigator","userAgent","isIphone","document","URL","kalturaPluginWrapper","PluginManager","add","KBaseComponent","extend","_root","_videoSize","_wasPlayed","stage","defaultConfig","parent","order","handleVideoSizeChange","getPlayer","evaluate","setup","addBindings","seek","sendNotification","getCuePoints","cuePoints","callback","getKalturaClient","doRequest","service","action","kentryid","data","code","objects","reduce","acc","partnerData","schemaVersion","text","videoHolder","getVideoHolder","kanalonyPlugin","plugins","kAnalony","bind","_getCurrentTime","ref","jQuery","getComponent","$el","attr","css","KM04","W","P","children","pop","T","nodeName","attributes","M","vnode","current","slice","__d","V","debounceRendering","D","splitText","_componentConstructor","__n","toLowerCase","u","createElementNS","createElement","parentNode","removeChild","cssText","E","test","innerHTML","__html","replace","substring","addEventListener","_","removeEventListener","__l","removeAttribute","removeAttributeNS","setAttributeNS","setAttribute","className","f","A","shift","afterMount","H","R","ownerSVGElement","B","h","appendChild","_component","nodeValue","createTextNode","replaceChild","v","__preactattr_","N","firstChild","nextSibling","dangerouslySetInnerHTML","childNodes","g","w","C","__k","trim","insertBefore","lastChild","previousSibling","F","U","__b","__x","__r","getDerivedStateFromProps","base","componentWillMount","componentWillReceiveProps","__c","__p","syncComponentUpdates","__s","S","shouldComponentUpdate","componentWillUpdate","getChildContext","getSnapshotBeforeUpdate","L","__u","componentDidUpdate","afterUpdate","__h","beforeUnmount","componentWillUnmount","Promise","resolve","then","setTimeout","forceUpdate","cloneElement","createRef","Component","rerender","options","pwNi","_preact","interopDefault","body","firstElementChild","init","app"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"pwNi\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0cfdcfac76abc342e787","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"pwNi\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"CUnC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ../node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"KM04\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// CONCATENATED MODULE: ./components/Hotspot.tsx\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n\nvar defaultContainerStyles = {\n    position: 'absolute',\n    display: 'table',\n    boxSizing: 'border-box',\n};\nvar defaultButtonsStyles = {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    appearance: 'none',\n    border: 'none',\n    display: 'table-cell',\n    verticalAlign: 'middle',\n    textAlign: 'center',\n    cursor: 'pointer',\n    wordBreak: 'break-all',\n    'textRendering': 'geometricPrecision'\n};\nvar defaultProps = {\n    styles: {}\n};\nfunction prepareUrl(url) {\n    if (!url.match(/^https?:\\/\\//i)) {\n        url = 'http://' + url;\n    }\n    return url;\n}\nvar Hotspot_Hotspot = /** @class */ (function (_super) {\n    __extends(Hotspot, _super);\n    function Hotspot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            disableClick: true,\n            isReady: false\n        };\n        _this.isClickable = function () {\n            var onClick = _this.props.hotspot.onClick;\n            if (!onClick) {\n                return false;\n            }\n            switch (onClick.type) {\n                case 'jumpToTime':\n                    return typeof onClick.jumpToTime !== 'undefined';\n                case 'openUrl':\n                case 'openUrlInNewTab':\n                    return !!onClick.url;\n                default:\n                    return false;\n            }\n        };\n        _this.handleClick = function () {\n            var hotspot = _this.props.hotspot;\n            var disableClick = _this.state.disableClick;\n            if (!hotspot.onClick || disableClick) {\n                return;\n            }\n            switch (hotspot.onClick.type) {\n                case 'jumpToTime':\n                    if (typeof hotspot.onClick.jumpToTime === 'undefined') {\n                        return;\n                    }\n                    _this.props.seekTo(hotspot.onClick.jumpToTime / 1000);\n                    break;\n                case 'openUrl':\n                    {\n                        if (!hotspot.onClick.url) {\n                            return;\n                        }\n                        var url = prepareUrl(hotspot.onClick.url);\n                        window.open(url, '_top');\n                        _this.props.sendAnalytics({ eventNumber: 47, target: url, hotspotId: hotspot.id });\n                    }\n                    break;\n                case 'openUrlInNewTab':\n                    {\n                        if (!hotspot.onClick.url) {\n                            return;\n                        }\n                        _this.props.pauseVideo();\n                        var url = prepareUrl(hotspot.onClick.url);\n                        try {\n                            window.open(url, '_blank');\n                            _this.props.sendAnalytics({ eventNumber: 47, target: url, hotspotId: hotspot.id });\n                        }\n                        catch (e) {\n                            window.open(url, '_top');\n                        }\n                    }\n                    break;\n                default:\n                    break;\n            }\n        };\n        _this.handleKeyUp = function (event) {\n            if (event.keyCode === 13) {\n                _this.handleClick();\n            }\n        };\n        return _this;\n    }\n    Hotspot.prototype.componentDidMount = function () {\n        var hotspot = this.props.hotspot;\n        if (!hotspot || !hotspot.onClick) {\n            this.setState({\n                isReady: true\n            });\n            return;\n        }\n        this.setState({\n            isReady: true,\n            disableClick: !this.isClickable()\n        });\n    };\n    Hotspot.prototype.render = function () {\n        var hotspot = this.props.hotspot;\n        var layout = hotspot.layout, label = hotspot.label;\n        var _a = this.state, isReady = _a.isReady, disableClick = _a.disableClick;\n        if (!isReady || !this.props.visible) {\n            return null;\n        }\n        var containerStyles = __assign(__assign({}, defaultContainerStyles), { top: layout.y, left: layout.x, height: layout.height, width: layout.width });\n        var buttonStyles = __assign(__assign(__assign({}, defaultButtonsStyles), hotspot.styles), { cursor: disableClick ? 'default' : 'pointer' });\n        return (Object(preact_min[\"h\"])(\"div\", { onClick: this.handleClick, onKeyUp: this.handleKeyUp, tabIndex: 0, \"aria-label\": label, \"aria-disabled\": disableClick, role: \"button\", style: containerStyles },\n            Object(preact_min[\"h\"])(\"div\", { style: buttonStyles }, label)));\n    };\n    Hotspot.defaultProps = defaultProps;\n    return Hotspot;\n}(preact_min[\"Component\"]));\n/* harmony default export */ var components_Hotspot = (Hotspot_Hotspot);\n\n// CONCATENATED MODULE: ./utils/logger.ts\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar isEnabled = false;\nvar logPrefix = '';\nfunction enableLog(prefix) {\n    logPrefix = prefix || '';\n    isEnabled = true;\n}\nfunction log(level, context, message) {\n    var optionalParams = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n        optionalParams[_i - 3] = arguments[_i];\n    }\n    if (isEnabled) {\n        console[level].apply(console, __spreadArrays([\"[\" + logPrefix + \"] [\" + level + \"]\" + (context ? \" [\" + context + \"]\" : '') + \" : \" + message], optionalParams));\n    }\n}\n\n// CONCATENATED MODULE: ./utils/hotspots-engine.ts\n\nvar ChangeTypes;\n(function (ChangeTypes) {\n    ChangeTypes[\"Show\"] = \"show\";\n    ChangeTypes[\"Hide\"] = \"hide\";\n})(ChangeTypes || (ChangeTypes = {}));\nvar reasonableSeekThreshold = 2000;\nfunction scaleVideo(videoWidth, videoHeight, playerWidth, playerHeight, fLetterBox) {\n    var result = { width: 0, height: 0, left: 0, top: 0, scaleToTargetWidth: true };\n    if ((videoWidth <= 0) || (videoHeight <= 0) || (playerWidth <= 0) || (playerHeight <= 0)) {\n        return result;\n    }\n    // scale to the target width\n    var scaleX1 = playerWidth;\n    var scaleY1 = (videoHeight * playerWidth) / videoWidth;\n    // scale to the target height\n    var scaleX2 = (videoWidth * playerHeight) / videoHeight;\n    var scaleY2 = playerHeight;\n    // now figure out which one we should use\n    var fScaleOnWidth = (scaleX2 > playerWidth);\n    if (fScaleOnWidth) {\n        fScaleOnWidth = fLetterBox;\n    }\n    else {\n        fScaleOnWidth = !fLetterBox;\n    }\n    if (fScaleOnWidth) {\n        result.width = Math.abs(scaleX1);\n        result.height = Math.abs(scaleY1);\n        result.scaleToTargetWidth = true;\n    }\n    else {\n        result.width = Math.abs(scaleX2);\n        result.height = Math.abs(scaleY2);\n        result.scaleToTargetWidth = false;\n    }\n    result.left = Math.abs((playerWidth - result.width) / 2);\n    result.top = Math.abs((playerHeight - result.height) / 2);\n    return result;\n}\nvar hotspots_engine_HotspotsEngine = /** @class */ (function () {\n    function HotspotsEngine(hotspots) {\n        this.isFirstTime = true;\n        this.hotspotsLayoutReady = false;\n        this.lastHandledTime = null;\n        this.lastHandledTimeIndex = null;\n        this.nextTimeToHandle = null;\n        this.hotspotsChanges = [];\n        this.playerSize = null;\n        this.videoSize = null;\n        log('debug', 'ctor', 'executed');\n        this.hotspots = hotspots; // NOTICE: it is the responsability of this engine not to return hotspot without layout\n        this.prepareHotspots();\n    }\n    HotspotsEngine.prototype.updateLayout = function (playerSize, videoSize) {\n        this.videoSize = videoSize;\n        this.playerSize = playerSize;\n        this.recalculateHotspotsLayout();\n        return this.lastHandledTimeIndex ? this.createHotspotsSnapshot(this.lastHandledTimeIndex) : [];\n    };\n    HotspotsEngine.prototype._calculateLayout = function (hotspot, scaleCalculation) {\n        var rawLayout = hotspot.rawLayout;\n        return {\n            x: scaleCalculation.left + rawLayout.relativeX * scaleCalculation.width,\n            y: scaleCalculation.top + rawLayout.relativeY * scaleCalculation.height,\n            width: rawLayout.relativeWidth * scaleCalculation.width,\n            height: rawLayout.relativeHeight * scaleCalculation.height\n        };\n    };\n    HotspotsEngine.prototype.recalculateHotspotsLayout = function () {\n        var _this = this;\n        log('debug', 'recalculateHotspotsLayout', \"calculating hotspots layout based on video/player sizes\");\n        if (!this.playerSize || !this.videoSize) {\n            log('debug', 'recalculateHotspotsLayout', \"missing video/player sizes, hide all hotspots\");\n            this.hotspotsLayoutReady = false;\n            return;\n        }\n        var _a = this.playerSize, playerWidth = _a.width, playerHeight = _a.height;\n        var _b = this.videoSize, videoWidth = _b.width, videoHeight = _b.height;\n        var canCalcaulateLayout = playerWidth && playerHeight && videoWidth && videoHeight;\n        if (!canCalcaulateLayout) {\n            log('debug', 'recalculateHotspotsLayout', \"missing video/player sizes, hide all hotspots\");\n            this.hotspotsLayoutReady = false;\n            return;\n        }\n        var scaleCalculation = scaleVideo(videoWidth, videoHeight, playerWidth, playerHeight, true);\n        log('debug', 'recalculateHotspotsLayout', \"recalculate hotspots layout based on new sizes\", scaleCalculation);\n        (this.hotspots || []).forEach(function (hotspot) {\n            hotspot.layout = _this._calculateLayout(hotspot, scaleCalculation);\n        });\n        this.hotspotsLayoutReady = true;\n    };\n    HotspotsEngine.prototype.getSnapshot = function (time) {\n        var timeIndex = this.findClosestLastIndexByTime(time);\n        log('debug', 'getSnapshot', \"create snapshot based on time \" + time, { timeIndex: timeIndex });\n        return this.createHotspotsSnapshot(timeIndex);\n    };\n    HotspotsEngine.prototype.updateTime = function (currentTime, forceSnapshot) {\n        if (forceSnapshot === void 0) { forceSnapshot = false; }\n        var _a = this, isFirstTime = _a.isFirstTime, lastHandledTime = _a.lastHandledTime, nextTimeToHandle = _a.nextTimeToHandle;\n        if (this.hotspotsChanges.length === 0) {\n            if (isFirstTime) {\n                log('log', 'updateTime', \"hotspots list empty. will always return empty snapshot\");\n                this.isFirstTime = false;\n            }\n            return { snapshot: [] };\n        }\n        var userSeeked = !isFirstTime && lastHandledTime !== null && nextTimeToHandle !== null && (lastHandledTime > currentTime || (currentTime - nextTimeToHandle) > reasonableSeekThreshold);\n        var hasChangesToHandle = isFirstTime || (this.lastHandledTime !== null && this.lastHandledTime > currentTime) || (this.nextTimeToHandle != null && currentTime >= this.nextTimeToHandle);\n        var closestChangeIndex = this.findClosestLastIndexByTime(currentTime);\n        var closestChangeTime = closestChangeIndex < 0 ? 0 : this.hotspotsChanges[closestChangeIndex].time;\n        if (!hasChangesToHandle) {\n            // log('log', 'updateTime', `new time is between handled time and next time to handle, assume no delta`);\n            if (forceSnapshot) {\n                return { snapshot: this.createHotspotsSnapshot(closestChangeIndex) };\n            }\n            return { delta: this.createEmptyDelta() };\n        }\n        log('debug', 'updateTime', \"has changes to handle. check if need to return snapshot instead of delta based on provided new time\", { currentTime: currentTime, closestChangeIndex: closestChangeIndex, closestChangeTime: closestChangeTime, lastHandledTime: lastHandledTime, nextTimeToHandle: nextTimeToHandle, isFirstTime: isFirstTime });\n        if (isFirstTime || forceSnapshot || userSeeked) {\n            log('debug', 'updateTime', \"some conditions doesn't allow returning delta, return snapshot instead\", { isFirstTime: isFirstTime, userSeeked: userSeeked, forceSnapshot: forceSnapshot });\n            var snapshot = this.createHotspotsSnapshot(closestChangeIndex);\n            this.updateInternals(closestChangeTime, closestChangeIndex);\n            return { snapshot: snapshot };\n        }\n        var delta = this.createHotspotsDelta(closestChangeIndex);\n        this.updateInternals(closestChangeTime, closestChangeIndex);\n        return { delta: delta };\n    };\n    HotspotsEngine.prototype.createHotspotsSnapshot = function (targetIndex) {\n        if (!this.hotspotsLayoutReady || targetIndex < 0 || !this.hotspotsChanges || this.hotspotsChanges.length === 0) {\n            log('log', 'createHotspotsSnapshot', \"resulted with empty snapshot\", {\n                targetIndex: targetIndex,\n                hotspotsLayoutReady: this.hotspotsLayoutReady,\n                hotspotsCount: (this.hotspotsChanges || []).length\n            });\n            return [];\n        }\n        var snapshot = [];\n        for (var index = 0; index <= targetIndex; index++) {\n            var item = this.hotspotsChanges[index];\n            var hotspotIndex = snapshot.indexOf(item.cuePoint);\n            if (item.type === ChangeTypes.Show) {\n                if (hotspotIndex === -1) {\n                    snapshot.push(item.cuePoint);\n                }\n            }\n            else {\n                if (hotspotIndex !== -1) {\n                    snapshot.splice(hotspotIndex, 1);\n                }\n            }\n        }\n        log('log', 'createHotspotsSnapshot', 'resulted snapshot', { snapshot: snapshot });\n        return snapshot;\n    };\n    HotspotsEngine.prototype.createHotspotsDelta = function (targetIndex) {\n        if (!this.hotspotsLayoutReady || !this.hotspotsChanges || this.hotspotsChanges.length === 0) {\n            log('log', 'createHotspotsDelta', \"resulted with empty delta\", {\n                hotspotsLayoutReady: this.hotspotsLayoutReady,\n                hotspotsCount: (this.hotspotsChanges || []).length\n            });\n            return this.createEmptyDelta();\n        }\n        var lastHandledTimeIndex = this.lastHandledTimeIndex;\n        if (lastHandledTimeIndex === null) {\n            log('log', 'createHotspotsDelta', \"invalid internal state. resulted with empty delta\");\n            return this.createEmptyDelta();\n        }\n        var newHotspots = [];\n        var removedHotspots = [];\n        log('log', 'createHotspotsDelta', \"find hotspots that were added or removed\");\n        for (var index = lastHandledTimeIndex + 1; index <= targetIndex; index++) {\n            var item = this.hotspotsChanges[index];\n            var hotspotIndex = newHotspots.indexOf(item.cuePoint);\n            if (item.type === ChangeTypes.Show) {\n                if (hotspotIndex === -1) {\n                    newHotspots.push(item.cuePoint);\n                }\n            }\n            else {\n                if (hotspotIndex !== -1) {\n                    log('log', 'createHotspotsDelta', \"hotspot was marked with type \" + item.type + \" at \" + item.time + \". remove from new hotspots list as it wasn't visible yet\", { hotspot: item.cuePoint });\n                    newHotspots.splice(hotspotIndex, 1);\n                }\n                else if (removedHotspots.indexOf(item.cuePoint) === -1) {\n                    log('log', 'createHotspotsDelta', \"hotspot was marked with type \" + item.type + \" at \" + item.time + \". add to removed hotspots list\", { hotspot: item.cuePoint });\n                    removedHotspots.push(item.cuePoint);\n                }\n            }\n        }\n        log('log', 'createHotspotsDelta', 'resulted delta', { newHotspots: newHotspots, removedHotspots: removedHotspots });\n        return { show: newHotspots, hide: removedHotspots };\n    };\n    HotspotsEngine.prototype.updateInternals = function (time, timeIndex) {\n        var hotspotsChanges = this.hotspotsChanges;\n        if (!hotspotsChanges || hotspotsChanges.length === 0) {\n            return;\n        }\n        var isIndexOfLastChange = timeIndex >= hotspotsChanges.length - 1;\n        var isIndexBeforeTheFirstChange = timeIndex === null;\n        this.lastHandledTime = time;\n        this.lastHandledTimeIndex = timeIndex;\n        this.nextTimeToHandle = isIndexBeforeTheFirstChange ? hotspotsChanges[0].time :\n            isIndexOfLastChange ? hotspotsChanges[hotspotsChanges.length - 1].time :\n                hotspotsChanges[timeIndex + 1].time;\n        this.isFirstTime = false;\n        log('debug', 'updateInternals', \"update inner state with new time and index\", {\n            lastHandledTime: this.lastHandledTime,\n            lastHandledTimeIndex: this.lastHandledTimeIndex,\n            nextTimeToHandle: this.nextTimeToHandle\n        });\n    };\n    HotspotsEngine.prototype.createEmptyDelta = function () {\n        return { show: [], hide: [] };\n    };\n    HotspotsEngine.prototype.binarySearch = function (items, value) {\n        if (!items || items.length === 0) {\n            // empty array, no index to return\n            return null;\n        }\n        if (value < items[0].time) {\n            // value less then the first item. return -1\n            return -1;\n        }\n        if (value > items[items.length - 1].time) {\n            // value bigger then the last item, return last item index\n            return items.length - 1;\n        }\n        var lo = 0;\n        var hi = items.length - 1;\n        while (lo <= hi) {\n            var mid = Math.floor((hi + lo + 1) / 2);\n            if (value < items[mid].time) {\n                hi = mid - 1;\n            }\n            else if (value > items[mid].time) {\n                lo = mid + 1;\n            }\n            else {\n                return mid;\n            }\n        }\n        return Math.min(lo, hi); // return the lowest index which represent the last visual item\n    };\n    HotspotsEngine.prototype.findClosestLastIndexByTime = function (time) {\n        var changes = this.hotspotsChanges;\n        var closestIndex = this.binarySearch(changes, time);\n        if (closestIndex === null) {\n            return -1;\n        }\n        var changesLength = changes.length;\n        while (closestIndex < changesLength - 1 && changes[closestIndex + 1].time === time) {\n            closestIndex++;\n        }\n        return closestIndex;\n    };\n    HotspotsEngine.prototype.prepareHotspots = function () {\n        var _this = this;\n        (this.hotspots || []).forEach(function (hotspot) {\n            if (hotspot.startTime !== null && typeof hotspot.startTime !== 'undefined' && hotspot.startTime >= 0) {\n                _this.hotspotsChanges.push({\n                    time: hotspot.startTime,\n                    type: ChangeTypes.Show,\n                    cuePoint: hotspot // NOTICE: it is the responsability of this engine not to return hotspot without layout\n                });\n            }\n            if (hotspot.endTime !== null && typeof hotspot.endTime !== 'undefined' && hotspot.endTime >= 0) {\n                _this.hotspotsChanges.push({\n                    time: hotspot.endTime,\n                    type: ChangeTypes.Hide,\n                    cuePoint: hotspot // NOTICE: it is the responsability of this engine not to return hotspot without layout\n                });\n            }\n        });\n        this.hotspotsChanges.sort(function (a, b) {\n            return a.time < b.time ? -1 : a.time === b.time ? 0 : 1;\n        });\n        log('debug', 'prepareHotspots', \"tracking \" + this.hotspotsChanges.length + \" changes\", this.hotspotsChanges);\n    };\n    return HotspotsEngine;\n}());\n\n\n// CONCATENATED MODULE: ./components/Stage.tsx\nvar Stage___extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Stage___assign = (this && this.__assign) || function () {\n    Stage___assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return Stage___assign.apply(this, arguments);\n};\n\n\n\n\nvar NotifyEventTypes;\n(function (NotifyEventTypes) {\n    NotifyEventTypes[\"Monitor\"] = \"monitor\";\n    NotifyEventTypes[\"Seeked\"] = \"seeked\";\n})(NotifyEventTypes || (NotifyEventTypes = {}));\nvar PlayerUpdateEvent = \"updatePlayHeadPercent:hotspots\";\nvar Stage_Stage = /** @class */ (function (_super) {\n    Stage___extends(Stage, _super);\n    function Stage() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.engine = null;\n        _this.initialState = {\n            isLoading: false,\n            playerSize: _this.props.getPlayerSize(),\n            videoSize: _this.props.getVideoSize(),\n            visibleHotspots: [],\n            showHotspots: false,\n            hasError: false\n        };\n        _this.state = Stage___assign({}, _this.initialState);\n        _this.showHotspots = function () {\n            _this.setState({\n                showHotspots: true\n            });\n        };\n        _this.notify = function (event) {\n            switch (event.type) {\n                case NotifyEventTypes.Monitor:\n                case NotifyEventTypes.Seeked:\n                    _this.syncVisibleHotspots();\n                    break;\n                default:\n                    break;\n            }\n        };\n        _this._handleCuepoints = function (result) {\n            var hotspots = result.hotspots, error = result.error;\n            if (error || !hotspots) {\n                log('error', '_handleCuepoints', 'failed to load cuepoints', { error: error ? error.message : 'missing hotspots array' });\n                _this.setState({\n                    isLoading: false,\n                    hasError: true,\n                });\n                return;\n            }\n            _this.engine = new hotspots_engine_HotspotsEngine(hotspots);\n            _this.engine.updateLayout(_this.state.playerSize, _this.state.videoSize);\n            _this.setState({\n                isLoading: false,\n                hasError: false,\n                visibleHotspots: []\n            }, function () {\n                _this.syncVisibleHotspots();\n            });\n        };\n        _this.handleResize = function () {\n            var _a = _this.props, getPlayerSize = _a.getPlayerSize, getVideoSize = _a.getVideoSize;\n            _this.setState({\n                playerSize: getPlayerSize(),\n                videoSize: getVideoSize()\n            }, function () {\n                if (_this.engine) {\n                    _this.engine.updateLayout(_this.state.playerSize, _this.state.videoSize);\n                    _this.syncVisibleHotspots(true);\n                }\n            });\n        };\n        _this.reset = function () {\n            _this.engine = null;\n            _this.setState(Stage___assign({}, _this.initialState), function () {\n                _this.props.loadCuePoints(_this._handleCuepoints);\n            });\n        };\n        _this.renderHotspots = function (visualHotspot) {\n            if (!visualHotspot) {\n                return null;\n            }\n            var _a = _this.props, seekTo = _a.seekTo, pauseVideo = _a.pauseVideo, sendAnalytics = _a.sendAnalytics;\n            return visualHotspot.map(function (hotspotData) { return (Object(preact_min[\"h\"])(components_Hotspot, { pauseVideo: pauseVideo, seekTo: seekTo, key: hotspotData.id, visible: true, hotspot: hotspotData, sendAnalytics: sendAnalytics })); });\n        };\n        return _this;\n    }\n    Stage.prototype.componentDidMount = function () {\n        this.reset();\n    };\n    Stage.prototype.syncVisibleHotspots = function (forceSnapshot) {\n        var _this = this;\n        if (forceSnapshot === void 0) { forceSnapshot = false; }\n        var getCurrentTime = this.props.getCurrentTime;\n        this.setState(function (state) {\n            if (!_this.engine) {\n                return {\n                    visibleHotspots: []\n                };\n            }\n            var hotspotsUpdate = _this.engine.updateTime(getCurrentTime(), forceSnapshot);\n            if (hotspotsUpdate.snapshot) {\n                return {\n                    visibleHotspots: hotspotsUpdate.snapshot\n                };\n            }\n            if (!hotspotsUpdate.delta) {\n                return {\n                    visibleHotspots: []\n                };\n            }\n            var _a = hotspotsUpdate.delta, show = _a.show, hide = _a.hide;\n            if (show.length !== 0 || hide.length !== 0) {\n                var visibleHotspots_1 = state.visibleHotspots;\n                show.forEach(function (hotspot) {\n                    var index = visibleHotspots_1.indexOf(hotspot);\n                    if (index === -1) {\n                        visibleHotspots_1.push(hotspot);\n                    }\n                });\n                hide.forEach(function (hotspot) {\n                    var index = visibleHotspots_1.indexOf(hotspot);\n                    if (index !== -1) {\n                        visibleHotspots_1.splice(index, 1);\n                    }\n                });\n                return {\n                    visibleHotspots: visibleHotspots_1\n                };\n            }\n        });\n    };\n    Stage.prototype.render = function () {\n        var _a = this.state, visibleHotspots = _a.visibleHotspots, showHotspots = _a.showHotspots;\n        var hotspotsElements = showHotspots ? this.renderHotspots(visibleHotspots) : null;\n        var style = {\n            position: 'absolute',\n            display: 'block',\n            overflow: 'visible',\n            top: 0,\n            left: 0,\n            width: 0,\n            height: 0\n        };\n        return (Object(preact_min[\"h\"])(\"div\", { style: style }, hotspotsElements));\n    };\n    return Stage;\n}(preact_min[\"Component\"]));\n/* harmony default export */ var components_Stage = (Stage_Stage);\n\n// CONCATENATED MODULE: ./player-v2/plugin.tsx\nvar plugin___assign = (this && this.__assign) || function () {\n    plugin___assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return plugin___assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n//let poly = require(\"preact-cli/lib/lib/webpack/polyfills\");\n\n\n\n(function (mw, $) {\n    function toObject(jsonAsString, defaultValue) {\n        if (defaultValue === void 0) { defaultValue = {}; }\n        if (!jsonAsString) {\n            return defaultValue;\n        }\n        try {\n            return { result: JSON.parse(jsonAsString) };\n        }\n        catch (e) {\n            return { error: e };\n        }\n    }\n    (function shouldEnableLogs() {\n        try {\n            if (document.URL.indexOf(\"debugKalturaPlayer\") !== -1) {\n                enableLog(\"hotspots\");\n            }\n        }\n        catch (e) {\n            // do nothing\n        }\n    })();\n    var WEBKIT_PLAYS_INLINE_KEY = \"EmbedPlayer.WebKitPlaysInline\";\n    function isIpad() {\n        return navigator.userAgent.indexOf(\"iPad\") != -1;\n    }\n    function isIphone() {\n        return navigator.userAgent.indexOf(\"iPhone\") != -1 && !isIpad();\n    }\n    mw.kalturaPluginWrapper(function () {\n        mw.PluginManager.add(\"hotspots\", mw.KBaseComponent.extend({\n            _root: null,\n            _videoSize: null,\n            _wasPlayed: false,\n            stage: null,\n            defaultConfig: {\n                parent: \"videoHolder\",\n                order: 1\n            },\n            handleVideoSizeChange: function (e) {\n                var _a = this.getPlayer().evaluate(\"{mediaProxy.entry}\"), width = _a.width, height = _a.height;\n                log(\"debug\", \"plugin.handleVideoSizeChange\", \"use entry size provided by player to calculate actual stage size\", { width: width, height: height });\n                if (!width || !height) {\n                    this._videoSize = null;\n                }\n                else {\n                    this._videoSize = { width: width, height: height };\n                }\n                this.stage.handleResize();\n            },\n            setup: function () {\n                if (isIphone()) {\n                    log(\"log\", \"setup\", \"iphone detected, disable plugin\");\n                    return;\n                }\n                this.addBindings();\n            },\n            seekTo: function (time) {\n                this.getPlayer().seek(time);\n            },\n            pauseVideo: function () {\n                this.getPlayer().sendNotification(\"doPause\");\n            },\n            getCuePoints: function () {\n                return this.cuePoints;\n            },\n            loadCuePoints: function (callback) {\n                var _this = this;\n                // do the api request\n                this.getKalturaClient().doRequest({\n                    service: \"cuepoint_cuepoint\",\n                    action: \"list\",\n                    \"filter:entryIdEqual\": this.getPlayer().kentryid,\n                    \"filter:objectType\": \"KalturaCuePointFilter\",\n                    \"filter:cuePointTypeEqual\": \"annotation.Annotation\",\n                    \"filter:tagsLike\": \"hotspots\"\n                }, function (data) {\n                    // if an error pop out:\n                    var hasError = !data || data.code;\n                    if (hasError) {\n                        callback({\n                            error: { message: data.code || \"failure\" }\n                        });\n                    }\n                    else {\n                        var hotspots = [];\n                        (data.objects || []).reduce(function (acc, cuePoint) {\n                            var _a = toObject(cuePoint.partnerData), partnerData = _a.result, error = _a.error;\n                            if (!partnerData ||\n                                !partnerData.schemaVersion) {\n                                log(\"warn\", \"loadCuePoints\", \"annotation '\" + cuePoint.partnerData.id + \"' has no schema version, skip annotation\");\n                                return acc;\n                            }\n                            var rawLayout = plugin___assign({}, partnerData.layout);\n                            acc.push({\n                                id: cuePoint.id,\n                                startTime: cuePoint.startTime,\n                                endTime: cuePoint.endTime,\n                                label: cuePoint.text,\n                                styles: partnerData.styles,\n                                onClick: partnerData.onClick,\n                                rawLayout: rawLayout\n                            });\n                            return acc;\n                        }, hotspots);\n                        callback({ hotspots: hotspots });\n                    }\n                });\n            },\n            getPlayerSize: function () {\n                var videoHolder = this.getPlayer().getVideoHolder();\n                if (!videoHolder) {\n                    return null;\n                }\n                var width = videoHolder.width();\n                var height = videoHolder.height();\n                return {\n                    width: width,\n                    height: height\n                };\n            },\n            sendAnalytics: function (event) {\n                try {\n                    var kanalonyPlugin = this.getPlayer().plugins.kAnalony;\n                    if (!kanalonyPlugin) {\n                        log(\"warn\", \"sendAnalytics\", \"cannot send analytics event, missing kAnalony plugin\", event);\n                        return;\n                    }\n                    var eventNumber = event.eventNumber, rest = __rest(event, [\"eventNumber\"]);\n                    kanalonyPlugin.sendAnalytics(eventNumber, rest);\n                }\n                catch (e) {\n                    log(\"error\", \"sendAnalytics\", \"cannot send analytics event with error '\" + e.message + \"'\", event);\n                }\n            },\n            getVideoSize: function () {\n                if (!this._videoSize) {\n                    return null;\n                }\n                return plugin___assign({}, this._videoSize);\n            },\n            addBindings: function () {\n                var _this = this;\n                this.bind(\"playerReady\", function () {\n                    var props = {\n                        getCurrentTime: _this._getCurrentTime.bind(_this),\n                        loadCuePoints: _this.loadCuePoints.bind(_this),\n                        getPlayerSize: _this.getPlayerSize.bind(_this),\n                        getVideoSize: _this.getVideoSize.bind(_this),\n                        pauseVideo: _this.pauseVideo.bind(_this),\n                        seekTo: _this.seekTo.bind(_this),\n                        sendAnalytics: _this.sendAnalytics.bind(_this)\n                    };\n                    _this._root = Object(preact_min[\"render\"])(Object(preact_min[\"h\"])(components_Stage, plugin___assign({}, props, { ref: function (ref) { return (_this.stage = ref); } })), jQuery('[id=\"hotspotsOverlay\"]')[0]);\n                });\n                this.bind(\"updateLayout\", function () {\n                    _this.stage.handleResize();\n                });\n                this.bind(\"firstPlay\", function () {\n                    if (!_this._wasPlayed) {\n                        _this.stage.showHotspots();\n                        _this._wasPlayed = true;\n                    }\n                });\n                this.bind(\"seeked\", function () {\n                    if (!_this._wasPlayed) {\n                        _this.stage.showHotspots();\n                        _this._wasPlayed = true;\n                    }\n                });\n                this.bind(\"onChangeMedia\", function () {\n                    // DEVELOPER NOTICE: this is the destruction place.\n                    _this._wasPlayed = false;\n                    _this._videoSize = null;\n                    Object(preact_min[\"render\"])(\n                    // @ts-ignore\n                    Object(preact_min[\"h\"])(null), jQuery('[id=\"hotspotsOverlay\"]')[0], _this._root);\n                    _this._root = null;\n                    _this.stage = null;\n                });\n                this.bind(\"monitorEvent\", function () {\n                    _this.stage.notify({ type: NotifyEventTypes.Monitor });\n                });\n                this.bind(\"mediaLoaded\", function () {\n                    _this.handleVideoSizeChange();\n                });\n                this.bind(\"seeked\", function () {\n                    _this.stage.notify({ type: NotifyEventTypes.Seeked });\n                });\n            },\n            _getCurrentTime: function () {\n                return this.getPlayer().currentTime * 1000;\n            },\n            getComponent: function () {\n                if (!this.$el) {\n                    this.$el = jQuery(\"<div></div>\")\n                        .attr(\"id\", \"hotspotsOverlay\")\n                        .css({\n                        position: \"absolute\",\n                        height: \"0\",\n                        width: \"0\",\n                        top: 0,\n                        left: 0,\n                        overflow: 'visible'\n                    });\n                }\n                return this.$el;\n            }\n        }));\n    });\n})(window.mw, window.jQuery);\n\n// CONCATENATED MODULE: ./player-v2/test.js\n\n\n\n/***/ }),\n\n/***/ \"KM04\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n!function () {\n    \"use strict\";\n    function e(e, t) {\n        var n, o, r, i, l = W;\n        for (i = arguments.length; i-- > 2;) {\n            P.push(arguments[i]);\n        }\n        t && null != t.children && (P.length || P.push(t.children), delete t.children);\n        while (P.length) {\n            if ((o = P.pop()) && void 0 !== o.pop)\n                for (i = o.length; i--;) {\n                    P.push(o[i]);\n                }\n            else\n                \"boolean\" == typeof o && (o = null), (r = \"function\" != typeof e) && (null == o ? o = \"\" : \"number\" == typeof o ? o += \"\" : \"string\" != typeof o && (r = !1)), r && n ? l[l.length - 1] += o : l === W ? l = [o] : l.push(o), n = r;\n        }\n        var a = new T();\n        return a.nodeName = e, a.children = l, a.attributes = null == t ? void 0 : t, a.key = null == t ? void 0 : t.key, void 0 !== M.vnode && M.vnode(a), a;\n    }\n    function t(e, t) {\n        for (var n in t) {\n            e[n] = t[n];\n        }\n        return e;\n    }\n    function n(e, t) {\n        e && (\"function\" == typeof e ? e(t) : e.current = t);\n    }\n    function o(n, o) {\n        return e(n.nodeName, t(t({}, n.attributes), o), arguments.length > 2 ? [].slice.call(arguments, 2) : n.children);\n    }\n    function r(e) {\n        !e.__d && (e.__d = !0) && 1 == V.push(e) && (M.debounceRendering || D)(i);\n    }\n    function i() {\n        var e;\n        while (e = V.pop()) {\n            e.__d && x(e);\n        }\n    }\n    function l(e, t, n) {\n        return \"string\" == typeof t || \"number\" == typeof t ? void 0 !== e.splitText : \"string\" == typeof t.nodeName ? !e._componentConstructor && a(e, t.nodeName) : n || e._componentConstructor === t.nodeName;\n    }\n    function a(e, t) {\n        return e.__n === t || e.nodeName.toLowerCase() === t.toLowerCase();\n    }\n    function u(e) {\n        var n = t({}, e.attributes);\n        n.children = e.children;\n        var o = e.nodeName.defaultProps;\n        if (void 0 !== o)\n            for (var r in o) {\n                void 0 === n[r] && (n[r] = o[r]);\n            }\n        return n;\n    }\n    function c(e, t) {\n        var n = t ? document.createElementNS(\"http://www.w3.org/2000/svg\", e) : document.createElement(e);\n        return n.__n = e, n;\n    }\n    function p(e) {\n        var t = e.parentNode;\n        t && t.removeChild(e);\n    }\n    function s(e, t, o, r, i) {\n        if (\"className\" === t && (t = \"class\"), \"key\" === t)\n            ;\n        else if (\"ref\" === t)\n            n(o, null), n(r, e);\n        else if (\"class\" !== t || i) {\n            if (\"style\" === t) {\n                if (r && \"string\" != typeof r && \"string\" != typeof o || (e.style.cssText = r || \"\"), r && \"object\" == typeof r) {\n                    if (\"string\" != typeof o)\n                        for (var l in o) {\n                            l in r || (e.style[l] = \"\");\n                        }\n                    for (var l in r) {\n                        e.style[l] = \"number\" == typeof r[l] && !1 === E.test(l) ? r[l] + \"px\" : r[l];\n                    }\n                }\n            }\n            else if (\"dangerouslySetInnerHTML\" === t)\n                r && (e.innerHTML = r.__html || \"\");\n            else if (\"o\" == t[0] && \"n\" == t[1]) {\n                var a = t !== (t = t.replace(/Capture$/, \"\"));\n                t = t.toLowerCase().substring(2), r ? o || e.addEventListener(t, _, a) : e.removeEventListener(t, _, a), (e.__l || (e.__l = {}))[t] = r;\n            }\n            else if (\"list\" !== t && \"type\" !== t && !i && t in e) {\n                try {\n                    e[t] = null == r ? \"\" : r;\n                }\n                catch (e) { }\n                null != r && !1 !== r || \"spellcheck\" == t || e.removeAttribute(t);\n            }\n            else {\n                var u = i && t !== (t = t.replace(/^xlink:?/, \"\"));\n                null == r || !1 === r ? u ? e.removeAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase()) : e.removeAttribute(t) : \"function\" != typeof r && (u ? e.setAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase(), r) : e.setAttribute(t, r));\n            }\n        }\n        else\n            e.className = r || \"\";\n    }\n    function _(e) {\n        return this.__l[e.type](M.event && M.event(e) || e);\n    }\n    function f() {\n        var e;\n        while (e = A.shift()) {\n            M.afterMount && M.afterMount(e), e.componentDidMount && e.componentDidMount();\n        }\n    }\n    function d(e, t, n, o, r, i) {\n        H++ || (R = null != r && void 0 !== r.ownerSVGElement, B = null != e && !(\"__preactattr_\" in e));\n        var l = h(e, t, n, o, i);\n        return r && l.parentNode !== r && r.appendChild(l), --H || (B = !1, i || f()), l;\n    }\n    function h(e, t, n, o, r) {\n        var i = e, l = R;\n        if (null != t && \"boolean\" != typeof t || (t = \"\"), \"string\" == typeof t || \"number\" == typeof t)\n            return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != t && (e.nodeValue = t) : (i = document.createTextNode(t), e && (e.parentNode && e.parentNode.replaceChild(i, e), v(e, !0))), i.__preactattr_ = !0, i;\n        var u = t.nodeName;\n        if (\"function\" == typeof u)\n            return N(e, t, n, o);\n        if (R = \"svg\" === u || \"foreignObject\" !== u && R, u += \"\", (!e || !a(e, u)) && (i = c(u, R), e)) {\n            while (e.firstChild) {\n                i.appendChild(e.firstChild);\n            }\n            e.parentNode && e.parentNode.replaceChild(i, e), v(e, !0);\n        }\n        var p = i.firstChild, s = i.__preactattr_, _ = t.children;\n        if (null == s) {\n            s = i.__preactattr_ = {};\n            for (var f = i.attributes, d = f.length; d--;) {\n                s[f[d].name] = f[d].value;\n            }\n        }\n        return !B && _ && 1 === _.length && \"string\" == typeof _[0] && null != p && void 0 !== p.splitText && null == p.nextSibling ? p.nodeValue != _[0] && (p.nodeValue = _[0]) : (_ && _.length || null != p) && m(i, _, n, o, B || null != s.dangerouslySetInnerHTML), y(i, t.attributes, s), R = l, i;\n    }\n    function m(e, t, n, o, r) {\n        var i, a, u, c, s, _ = e.childNodes, f = [], d = {}, m = 0, b = 0, y = _.length, g = 0, w = t ? t.length : 0;\n        if (0 !== y)\n            for (var C = 0; C < y; C++) {\n                var x = _[C], N = x.__preactattr_, k = w && N ? x._component ? x._component.__k : N.key : null;\n                null != k ? (m++, d[k] = x) : (N || (void 0 !== x.splitText ? !r || x.nodeValue.trim() : r)) && (f[g++] = x);\n            }\n        if (0 !== w)\n            for (var C = 0; C < w; C++) {\n                c = t[C], s = null;\n                var k = c.key;\n                if (null != k)\n                    m && void 0 !== d[k] && (s = d[k], d[k] = void 0, m--);\n                else if (b < g)\n                    for (i = b; i < g; i++) {\n                        if (void 0 !== f[i] && l(a = f[i], c, r)) {\n                            s = a, f[i] = void 0, i === g - 1 && g--, i === b && b++;\n                            break;\n                        }\n                    }\n                s = h(s, c, n, o), u = _[C], s && s !== e && s !== u && (null == u ? e.appendChild(s) : s === u.nextSibling ? p(u) : e.insertBefore(s, u));\n            }\n        if (m)\n            for (var C in d) {\n                void 0 !== d[C] && v(d[C], !1);\n            }\n        while (b <= g) {\n            void 0 !== (s = f[g--]) && v(s, !1);\n        }\n    }\n    function v(e, t) {\n        var o = e._component;\n        o ? k(o) : (null != e.__preactattr_ && n(e.__preactattr_.ref, null), !1 !== t && null != e.__preactattr_ || p(e), b(e));\n    }\n    function b(e) {\n        e = e.lastChild;\n        while (e) {\n            var t = e.previousSibling;\n            v(e, !0), e = t;\n        }\n    }\n    function y(e, t, n) {\n        var o;\n        for (o in n) {\n            t && null != t[o] || null == n[o] || s(e, o, n[o], n[o] = void 0, R);\n        }\n        for (o in t) {\n            \"children\" === o || \"innerHTML\" === o || o in n && t[o] === (\"value\" === o || \"checked\" === o ? e[o] : n[o]) || s(e, o, n[o], n[o] = t[o], R);\n        }\n    }\n    function g(e, t, n) {\n        var o, r = F.length;\n        e.prototype && e.prototype.render ? (o = new e(t, n), U.call(o, t, n)) : (o = new U(t, n), o.constructor = e, o.render = w);\n        while (r--) {\n            if (F[r].constructor === e)\n                return o.__b = F[r].__b, F.splice(r, 1), o;\n        }\n        return o;\n    }\n    function w(e, t, n) {\n        return this.constructor(e, n);\n    }\n    function C(e, t, o, i, l) {\n        e.__x || (e.__x = !0, e.__r = t.ref, e.__k = t.key, delete t.ref, delete t.key, void 0 === e.constructor.getDerivedStateFromProps && (!e.base || l ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(t, i)), i && i !== e.context && (e.__c || (e.__c = e.context), e.context = i), e.__p || (e.__p = e.props), e.props = t, e.__x = !1, 0 !== o && (1 !== o && !1 === M.syncComponentUpdates && e.base ? r(e) : x(e, 1, l)), n(e.__r, e));\n    }\n    function x(e, n, o, r) {\n        if (!e.__x) {\n            var i, l, a, c = e.props, p = e.state, s = e.context, _ = e.__p || c, h = e.__s || p, m = e.__c || s, b = e.base, y = e.__b, w = b || y, N = e._component, U = !1, S = m;\n            if (e.constructor.getDerivedStateFromProps && (p = t(t({}, p), e.constructor.getDerivedStateFromProps(c, p)), e.state = p), b && (e.props = _, e.state = h, e.context = m, 2 !== n && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(c, p, s) ? U = !0 : e.componentWillUpdate && e.componentWillUpdate(c, p, s), e.props = c, e.state = p, e.context = s), e.__p = e.__s = e.__c = e.__b = null, e.__d = !1, !U) {\n                i = e.render(c, p, s), e.getChildContext && (s = t(t({}, s), e.getChildContext())), b && e.getSnapshotBeforeUpdate && (S = e.getSnapshotBeforeUpdate(_, h));\n                var L, T, P = i && i.nodeName;\n                if (\"function\" == typeof P) {\n                    var W = u(i);\n                    l = N, l && l.constructor === P && W.key == l.__k ? C(l, W, 1, s, !1) : (L = l, e._component = l = g(P, W, s), l.__b = l.__b || y, l.__u = e, C(l, W, 0, s, !1), x(l, 1, o, !0)), T = l.base;\n                }\n                else\n                    a = w, L = N, L && (a = e._component = null), (w || 1 === n) && (a && (a._component = null), T = d(a, i, s, o || !b, w && w.parentNode, !0));\n                if (w && T !== w && l !== N) {\n                    var D = w.parentNode;\n                    D && T !== D && (D.replaceChild(T, w), L || (w._component = null, v(w, !1)));\n                }\n                if (L && k(L), e.base = T, T && !r) {\n                    var E = e, V = e;\n                    while (V = V.__u) {\n                        (E = V).base = T;\n                    }\n                    T._component = E, T._componentConstructor = E.constructor;\n                }\n            }\n            !b || o ? A.push(e) : U || (e.componentDidUpdate && e.componentDidUpdate(_, h, S), M.afterUpdate && M.afterUpdate(e));\n            while (e.__h.length) {\n                e.__h.pop().call(e);\n            }\n            H || r || f();\n        }\n    }\n    function N(e, t, n, o) {\n        var r = e && e._component, i = r, l = e, a = r && e._componentConstructor === t.nodeName, c = a, p = u(t);\n        while (r && !c && (r = r.__u)) {\n            c = r.constructor === t.nodeName;\n        }\n        return r && c && (!o || r._component) ? (C(r, p, 3, n, o), e = r.base) : (i && !a && (k(i), e = l = null), r = g(t.nodeName, p, n), e && !r.__b && (r.__b = e, l = null), C(r, p, 1, n, o), e = r.base, l && e !== l && (l._component = null, v(l, !1))), e;\n    }\n    function k(e) {\n        M.beforeUnmount && M.beforeUnmount(e);\n        var t = e.base;\n        e.__x = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;\n        var o = e._component;\n        o ? k(o) : t && (null != t.__preactattr_ && n(t.__preactattr_.ref, null), e.__b = t, p(t), F.push(e), b(t)), n(e.__r, null);\n    }\n    function U(e, t) {\n        this.__d = !0, this.context = t, this.props = e, this.state = this.state || {}, this.__h = [];\n    }\n    function S(e, t, n) {\n        return d(n, e, {}, !1, t, !1);\n    }\n    function L() {\n        return {};\n    }\n    var T = function T() { }, M = {}, P = [], W = [], D = \"function\" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout, E = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i, V = [], A = [], H = 0, R = !1, B = !1, F = [];\n    t(U.prototype, { setState: function setState(e, n) {\n            this.__s || (this.__s = this.state), this.state = t(t({}, this.state), \"function\" == typeof e ? e(this.state, this.props) : e), n && this.__h.push(n), r(this);\n        }, forceUpdate: function forceUpdate(e) {\n            e && this.__h.push(e), x(this, 2);\n        }, render: function render() { } });\n    var j = { h: e, createElement: e, cloneElement: o, createRef: L, Component: U, render: S, rerender: i, options: M };\n     true ? module.exports = j : self.preact = j;\n}();\n//# sourceMappingURL=preact.min.js.map\n\n\n/***/ }),\n\n/***/ \"pwNi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _preact = __webpack_require__(\"KM04\");\nif (false) {\n    require('preact/devtools');\n}\nelse if (false) {\n    navigator.serviceWorker.register(__webpack_public_path__ + 'sw.js');\n}\nvar interopDefault = function interopDefault(m) {\n    return m && m[\"default\"] ? m[\"default\"] : m;\n};\nvar app = interopDefault(__webpack_require__(\"CUnC\"));\nif (typeof app === 'function') {\n    var root = document.body.firstElementChild;\n    var init = function init() {\n        var app = interopDefault(__webpack_require__(\"CUnC\"));\n        root = (0, _preact.render)((0, _preact.h)(app), document.body, root);\n    };\n    if (false)\n        module.hot.accept('preact-cli-entrypoint', init);\n    init();\n}\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// bundle.js","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, Component } from \"preact\";\nvar defaultContainerStyles = {\n    position: 'absolute',\n    display: 'table',\n    boxSizing: 'border-box',\n};\nvar defaultButtonsStyles = {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    appearance: 'none',\n    border: 'none',\n    display: 'table-cell',\n    verticalAlign: 'middle',\n    textAlign: 'center',\n    cursor: 'pointer',\n    wordBreak: 'break-all',\n    'textRendering': 'geometricPrecision'\n};\nvar defaultProps = {\n    styles: {}\n};\nfunction prepareUrl(url) {\n    if (!url.match(/^https?:\\/\\//i)) {\n        url = 'http://' + url;\n    }\n    return url;\n}\nvar Hotspot = /** @class */ (function (_super) {\n    __extends(Hotspot, _super);\n    function Hotspot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            disableClick: true,\n            isReady: false\n        };\n        _this.isClickable = function () {\n            var onClick = _this.props.hotspot.onClick;\n            if (!onClick) {\n                return false;\n            }\n            switch (onClick.type) {\n                case 'jumpToTime':\n                    return typeof onClick.jumpToTime !== 'undefined';\n                case 'openUrl':\n                case 'openUrlInNewTab':\n                    return !!onClick.url;\n                default:\n                    return false;\n            }\n        };\n        _this.handleClick = function () {\n            var hotspot = _this.props.hotspot;\n            var disableClick = _this.state.disableClick;\n            if (!hotspot.onClick || disableClick) {\n                return;\n            }\n            switch (hotspot.onClick.type) {\n                case 'jumpToTime':\n                    if (typeof hotspot.onClick.jumpToTime === 'undefined') {\n                        return;\n                    }\n                    _this.props.seekTo(hotspot.onClick.jumpToTime / 1000);\n                    break;\n                case 'openUrl':\n                    {\n                        if (!hotspot.onClick.url) {\n                            return;\n                        }\n                        var url = prepareUrl(hotspot.onClick.url);\n                        window.open(url, '_top');\n                        _this.props.sendAnalytics({ eventNumber: 47, target: url, hotspotId: hotspot.id });\n                    }\n                    break;\n                case 'openUrlInNewTab':\n                    {\n                        if (!hotspot.onClick.url) {\n                            return;\n                        }\n                        _this.props.pauseVideo();\n                        var url = prepareUrl(hotspot.onClick.url);\n                        try {\n                            window.open(url, '_blank');\n                            _this.props.sendAnalytics({ eventNumber: 47, target: url, hotspotId: hotspot.id });\n                        }\n                        catch (e) {\n                            window.open(url, '_top');\n                        }\n                    }\n                    break;\n                default:\n                    break;\n            }\n        };\n        _this.handleKeyUp = function (event) {\n            if (event.keyCode === 13) {\n                _this.handleClick();\n            }\n        };\n        return _this;\n    }\n    Hotspot.prototype.componentDidMount = function () {\n        var hotspot = this.props.hotspot;\n        if (!hotspot || !hotspot.onClick) {\n            this.setState({\n                isReady: true\n            });\n            return;\n        }\n        this.setState({\n            isReady: true,\n            disableClick: !this.isClickable()\n        });\n    };\n    Hotspot.prototype.render = function () {\n        var hotspot = this.props.hotspot;\n        var layout = hotspot.layout, label = hotspot.label;\n        var _a = this.state, isReady = _a.isReady, disableClick = _a.disableClick;\n        if (!isReady || !this.props.visible) {\n            return null;\n        }\n        var containerStyles = __assign(__assign({}, defaultContainerStyles), { top: layout.y, left: layout.x, height: layout.height, width: layout.width });\n        var buttonStyles = __assign(__assign(__assign({}, defaultButtonsStyles), hotspot.styles), { cursor: disableClick ? 'default' : 'pointer' });\n        return (h(\"div\", { onClick: this.handleClick, onKeyUp: this.handleKeyUp, tabIndex: 0, \"aria-label\": label, \"aria-disabled\": disableClick, role: \"button\", style: containerStyles },\n            h(\"div\", { style: buttonStyles }, label)));\n    };\n    Hotspot.defaultProps = defaultProps;\n    return Hotspot;\n}(Component));\nexport default Hotspot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/Hotspot.tsx\n// module id = null\n// module chunks = ","var __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar isEnabled = false;\nvar logPrefix = '';\nexport function enableLog(prefix) {\n    logPrefix = prefix || '';\n    isEnabled = true;\n}\nexport function log(level, context, message) {\n    var optionalParams = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n        optionalParams[_i - 3] = arguments[_i];\n    }\n    if (isEnabled) {\n        console[level].apply(console, __spreadArrays([\"[\" + logPrefix + \"] [\" + level + \"]\" + (context ? \" [\" + context + \"]\" : '') + \" : \" + message], optionalParams));\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/logger.ts\n// module id = null\n// module chunks = ","import { log } from './logger';\nvar ChangeTypes;\n(function (ChangeTypes) {\n    ChangeTypes[\"Show\"] = \"show\";\n    ChangeTypes[\"Hide\"] = \"hide\";\n})(ChangeTypes || (ChangeTypes = {}));\nvar reasonableSeekThreshold = 2000;\nfunction scaleVideo(videoWidth, videoHeight, playerWidth, playerHeight, fLetterBox) {\n    var result = { width: 0, height: 0, left: 0, top: 0, scaleToTargetWidth: true };\n    if ((videoWidth <= 0) || (videoHeight <= 0) || (playerWidth <= 0) || (playerHeight <= 0)) {\n        return result;\n    }\n    // scale to the target width\n    var scaleX1 = playerWidth;\n    var scaleY1 = (videoHeight * playerWidth) / videoWidth;\n    // scale to the target height\n    var scaleX2 = (videoWidth * playerHeight) / videoHeight;\n    var scaleY2 = playerHeight;\n    // now figure out which one we should use\n    var fScaleOnWidth = (scaleX2 > playerWidth);\n    if (fScaleOnWidth) {\n        fScaleOnWidth = fLetterBox;\n    }\n    else {\n        fScaleOnWidth = !fLetterBox;\n    }\n    if (fScaleOnWidth) {\n        result.width = Math.abs(scaleX1);\n        result.height = Math.abs(scaleY1);\n        result.scaleToTargetWidth = true;\n    }\n    else {\n        result.width = Math.abs(scaleX2);\n        result.height = Math.abs(scaleY2);\n        result.scaleToTargetWidth = false;\n    }\n    result.left = Math.abs((playerWidth - result.width) / 2);\n    result.top = Math.abs((playerHeight - result.height) / 2);\n    return result;\n}\nvar HotspotsEngine = /** @class */ (function () {\n    function HotspotsEngine(hotspots) {\n        this.isFirstTime = true;\n        this.hotspotsLayoutReady = false;\n        this.lastHandledTime = null;\n        this.lastHandledTimeIndex = null;\n        this.nextTimeToHandle = null;\n        this.hotspotsChanges = [];\n        this.playerSize = null;\n        this.videoSize = null;\n        log('debug', 'ctor', 'executed');\n        this.hotspots = hotspots; // NOTICE: it is the responsability of this engine not to return hotspot without layout\n        this.prepareHotspots();\n    }\n    HotspotsEngine.prototype.updateLayout = function (playerSize, videoSize) {\n        this.videoSize = videoSize;\n        this.playerSize = playerSize;\n        this.recalculateHotspotsLayout();\n        return this.lastHandledTimeIndex ? this.createHotspotsSnapshot(this.lastHandledTimeIndex) : [];\n    };\n    HotspotsEngine.prototype._calculateLayout = function (hotspot, scaleCalculation) {\n        var rawLayout = hotspot.rawLayout;\n        return {\n            x: scaleCalculation.left + rawLayout.relativeX * scaleCalculation.width,\n            y: scaleCalculation.top + rawLayout.relativeY * scaleCalculation.height,\n            width: rawLayout.relativeWidth * scaleCalculation.width,\n            height: rawLayout.relativeHeight * scaleCalculation.height\n        };\n    };\n    HotspotsEngine.prototype.recalculateHotspotsLayout = function () {\n        var _this = this;\n        log('debug', 'recalculateHotspotsLayout', \"calculating hotspots layout based on video/player sizes\");\n        if (!this.playerSize || !this.videoSize) {\n            log('debug', 'recalculateHotspotsLayout', \"missing video/player sizes, hide all hotspots\");\n            this.hotspotsLayoutReady = false;\n            return;\n        }\n        var _a = this.playerSize, playerWidth = _a.width, playerHeight = _a.height;\n        var _b = this.videoSize, videoWidth = _b.width, videoHeight = _b.height;\n        var canCalcaulateLayout = playerWidth && playerHeight && videoWidth && videoHeight;\n        if (!canCalcaulateLayout) {\n            log('debug', 'recalculateHotspotsLayout', \"missing video/player sizes, hide all hotspots\");\n            this.hotspotsLayoutReady = false;\n            return;\n        }\n        var scaleCalculation = scaleVideo(videoWidth, videoHeight, playerWidth, playerHeight, true);\n        log('debug', 'recalculateHotspotsLayout', \"recalculate hotspots layout based on new sizes\", scaleCalculation);\n        (this.hotspots || []).forEach(function (hotspot) {\n            hotspot.layout = _this._calculateLayout(hotspot, scaleCalculation);\n        });\n        this.hotspotsLayoutReady = true;\n    };\n    HotspotsEngine.prototype.getSnapshot = function (time) {\n        var timeIndex = this.findClosestLastIndexByTime(time);\n        log('debug', 'getSnapshot', \"create snapshot based on time \" + time, { timeIndex: timeIndex });\n        return this.createHotspotsSnapshot(timeIndex);\n    };\n    HotspotsEngine.prototype.updateTime = function (currentTime, forceSnapshot) {\n        if (forceSnapshot === void 0) { forceSnapshot = false; }\n        var _a = this, isFirstTime = _a.isFirstTime, lastHandledTime = _a.lastHandledTime, nextTimeToHandle = _a.nextTimeToHandle;\n        if (this.hotspotsChanges.length === 0) {\n            if (isFirstTime) {\n                log('log', 'updateTime', \"hotspots list empty. will always return empty snapshot\");\n                this.isFirstTime = false;\n            }\n            return { snapshot: [] };\n        }\n        var userSeeked = !isFirstTime && lastHandledTime !== null && nextTimeToHandle !== null && (lastHandledTime > currentTime || (currentTime - nextTimeToHandle) > reasonableSeekThreshold);\n        var hasChangesToHandle = isFirstTime || (this.lastHandledTime !== null && this.lastHandledTime > currentTime) || (this.nextTimeToHandle != null && currentTime >= this.nextTimeToHandle);\n        var closestChangeIndex = this.findClosestLastIndexByTime(currentTime);\n        var closestChangeTime = closestChangeIndex < 0 ? 0 : this.hotspotsChanges[closestChangeIndex].time;\n        if (!hasChangesToHandle) {\n            // log('log', 'updateTime', `new time is between handled time and next time to handle, assume no delta`);\n            if (forceSnapshot) {\n                return { snapshot: this.createHotspotsSnapshot(closestChangeIndex) };\n            }\n            return { delta: this.createEmptyDelta() };\n        }\n        log('debug', 'updateTime', \"has changes to handle. check if need to return snapshot instead of delta based on provided new time\", { currentTime: currentTime, closestChangeIndex: closestChangeIndex, closestChangeTime: closestChangeTime, lastHandledTime: lastHandledTime, nextTimeToHandle: nextTimeToHandle, isFirstTime: isFirstTime });\n        if (isFirstTime || forceSnapshot || userSeeked) {\n            log('debug', 'updateTime', \"some conditions doesn't allow returning delta, return snapshot instead\", { isFirstTime: isFirstTime, userSeeked: userSeeked, forceSnapshot: forceSnapshot });\n            var snapshot = this.createHotspotsSnapshot(closestChangeIndex);\n            this.updateInternals(closestChangeTime, closestChangeIndex);\n            return { snapshot: snapshot };\n        }\n        var delta = this.createHotspotsDelta(closestChangeIndex);\n        this.updateInternals(closestChangeTime, closestChangeIndex);\n        return { delta: delta };\n    };\n    HotspotsEngine.prototype.createHotspotsSnapshot = function (targetIndex) {\n        if (!this.hotspotsLayoutReady || targetIndex < 0 || !this.hotspotsChanges || this.hotspotsChanges.length === 0) {\n            log('log', 'createHotspotsSnapshot', \"resulted with empty snapshot\", {\n                targetIndex: targetIndex,\n                hotspotsLayoutReady: this.hotspotsLayoutReady,\n                hotspotsCount: (this.hotspotsChanges || []).length\n            });\n            return [];\n        }\n        var snapshot = [];\n        for (var index = 0; index <= targetIndex; index++) {\n            var item = this.hotspotsChanges[index];\n            var hotspotIndex = snapshot.indexOf(item.cuePoint);\n            if (item.type === ChangeTypes.Show) {\n                if (hotspotIndex === -1) {\n                    snapshot.push(item.cuePoint);\n                }\n            }\n            else {\n                if (hotspotIndex !== -1) {\n                    snapshot.splice(hotspotIndex, 1);\n                }\n            }\n        }\n        log('log', 'createHotspotsSnapshot', 'resulted snapshot', { snapshot: snapshot });\n        return snapshot;\n    };\n    HotspotsEngine.prototype.createHotspotsDelta = function (targetIndex) {\n        if (!this.hotspotsLayoutReady || !this.hotspotsChanges || this.hotspotsChanges.length === 0) {\n            log('log', 'createHotspotsDelta', \"resulted with empty delta\", {\n                hotspotsLayoutReady: this.hotspotsLayoutReady,\n                hotspotsCount: (this.hotspotsChanges || []).length\n            });\n            return this.createEmptyDelta();\n        }\n        var lastHandledTimeIndex = this.lastHandledTimeIndex;\n        if (lastHandledTimeIndex === null) {\n            log('log', 'createHotspotsDelta', \"invalid internal state. resulted with empty delta\");\n            return this.createEmptyDelta();\n        }\n        var newHotspots = [];\n        var removedHotspots = [];\n        log('log', 'createHotspotsDelta', \"find hotspots that were added or removed\");\n        for (var index = lastHandledTimeIndex + 1; index <= targetIndex; index++) {\n            var item = this.hotspotsChanges[index];\n            var hotspotIndex = newHotspots.indexOf(item.cuePoint);\n            if (item.type === ChangeTypes.Show) {\n                if (hotspotIndex === -1) {\n                    newHotspots.push(item.cuePoint);\n                }\n            }\n            else {\n                if (hotspotIndex !== -1) {\n                    log('log', 'createHotspotsDelta', \"hotspot was marked with type \" + item.type + \" at \" + item.time + \". remove from new hotspots list as it wasn't visible yet\", { hotspot: item.cuePoint });\n                    newHotspots.splice(hotspotIndex, 1);\n                }\n                else if (removedHotspots.indexOf(item.cuePoint) === -1) {\n                    log('log', 'createHotspotsDelta', \"hotspot was marked with type \" + item.type + \" at \" + item.time + \". add to removed hotspots list\", { hotspot: item.cuePoint });\n                    removedHotspots.push(item.cuePoint);\n                }\n            }\n        }\n        log('log', 'createHotspotsDelta', 'resulted delta', { newHotspots: newHotspots, removedHotspots: removedHotspots });\n        return { show: newHotspots, hide: removedHotspots };\n    };\n    HotspotsEngine.prototype.updateInternals = function (time, timeIndex) {\n        var hotspotsChanges = this.hotspotsChanges;\n        if (!hotspotsChanges || hotspotsChanges.length === 0) {\n            return;\n        }\n        var isIndexOfLastChange = timeIndex >= hotspotsChanges.length - 1;\n        var isIndexBeforeTheFirstChange = timeIndex === null;\n        this.lastHandledTime = time;\n        this.lastHandledTimeIndex = timeIndex;\n        this.nextTimeToHandle = isIndexBeforeTheFirstChange ? hotspotsChanges[0].time :\n            isIndexOfLastChange ? hotspotsChanges[hotspotsChanges.length - 1].time :\n                hotspotsChanges[timeIndex + 1].time;\n        this.isFirstTime = false;\n        log('debug', 'updateInternals', \"update inner state with new time and index\", {\n            lastHandledTime: this.lastHandledTime,\n            lastHandledTimeIndex: this.lastHandledTimeIndex,\n            nextTimeToHandle: this.nextTimeToHandle\n        });\n    };\n    HotspotsEngine.prototype.createEmptyDelta = function () {\n        return { show: [], hide: [] };\n    };\n    HotspotsEngine.prototype.binarySearch = function (items, value) {\n        if (!items || items.length === 0) {\n            // empty array, no index to return\n            return null;\n        }\n        if (value < items[0].time) {\n            // value less then the first item. return -1\n            return -1;\n        }\n        if (value > items[items.length - 1].time) {\n            // value bigger then the last item, return last item index\n            return items.length - 1;\n        }\n        var lo = 0;\n        var hi = items.length - 1;\n        while (lo <= hi) {\n            var mid = Math.floor((hi + lo + 1) / 2);\n            if (value < items[mid].time) {\n                hi = mid - 1;\n            }\n            else if (value > items[mid].time) {\n                lo = mid + 1;\n            }\n            else {\n                return mid;\n            }\n        }\n        return Math.min(lo, hi); // return the lowest index which represent the last visual item\n    };\n    HotspotsEngine.prototype.findClosestLastIndexByTime = function (time) {\n        var changes = this.hotspotsChanges;\n        var closestIndex = this.binarySearch(changes, time);\n        if (closestIndex === null) {\n            return -1;\n        }\n        var changesLength = changes.length;\n        while (closestIndex < changesLength - 1 && changes[closestIndex + 1].time === time) {\n            closestIndex++;\n        }\n        return closestIndex;\n    };\n    HotspotsEngine.prototype.prepareHotspots = function () {\n        var _this = this;\n        (this.hotspots || []).forEach(function (hotspot) {\n            if (hotspot.startTime !== null && typeof hotspot.startTime !== 'undefined' && hotspot.startTime >= 0) {\n                _this.hotspotsChanges.push({\n                    time: hotspot.startTime,\n                    type: ChangeTypes.Show,\n                    cuePoint: hotspot // NOTICE: it is the responsability of this engine not to return hotspot without layout\n                });\n            }\n            if (hotspot.endTime !== null && typeof hotspot.endTime !== 'undefined' && hotspot.endTime >= 0) {\n                _this.hotspotsChanges.push({\n                    time: hotspot.endTime,\n                    type: ChangeTypes.Hide,\n                    cuePoint: hotspot // NOTICE: it is the responsability of this engine not to return hotspot without layout\n                });\n            }\n        });\n        this.hotspotsChanges.sort(function (a, b) {\n            return a.time < b.time ? -1 : a.time === b.time ? 0 : 1;\n        });\n        log('debug', 'prepareHotspots', \"tracking \" + this.hotspotsChanges.length + \" changes\", this.hotspotsChanges);\n    };\n    return HotspotsEngine;\n}());\nexport { HotspotsEngine };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./utils/hotspots-engine.ts\n// module id = null\n// module chunks = ","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { h, Component } from \"preact\";\nimport Hotspot from './Hotspot';\nimport { HotspotsEngine } from \"../utils/hotspots-engine\";\nimport { log } from \"../utils/logger\";\nexport var NotifyEventTypes;\n(function (NotifyEventTypes) {\n    NotifyEventTypes[\"Monitor\"] = \"monitor\";\n    NotifyEventTypes[\"Seeked\"] = \"seeked\";\n})(NotifyEventTypes || (NotifyEventTypes = {}));\nvar PlayerUpdateEvent = \"updatePlayHeadPercent:hotspots\";\nvar Stage = /** @class */ (function (_super) {\n    __extends(Stage, _super);\n    function Stage() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.engine = null;\n        _this.initialState = {\n            isLoading: false,\n            playerSize: _this.props.getPlayerSize(),\n            videoSize: _this.props.getVideoSize(),\n            visibleHotspots: [],\n            showHotspots: false,\n            hasError: false\n        };\n        _this.state = __assign({}, _this.initialState);\n        _this.showHotspots = function () {\n            _this.setState({\n                showHotspots: true\n            });\n        };\n        _this.notify = function (event) {\n            switch (event.type) {\n                case NotifyEventTypes.Monitor:\n                case NotifyEventTypes.Seeked:\n                    _this.syncVisibleHotspots();\n                    break;\n                default:\n                    break;\n            }\n        };\n        _this._handleCuepoints = function (result) {\n            var hotspots = result.hotspots, error = result.error;\n            if (error || !hotspots) {\n                log('error', '_handleCuepoints', 'failed to load cuepoints', { error: error ? error.message : 'missing hotspots array' });\n                _this.setState({\n                    isLoading: false,\n                    hasError: true,\n                });\n                return;\n            }\n            _this.engine = new HotspotsEngine(hotspots);\n            _this.engine.updateLayout(_this.state.playerSize, _this.state.videoSize);\n            _this.setState({\n                isLoading: false,\n                hasError: false,\n                visibleHotspots: []\n            }, function () {\n                _this.syncVisibleHotspots();\n            });\n        };\n        _this.handleResize = function () {\n            var _a = _this.props, getPlayerSize = _a.getPlayerSize, getVideoSize = _a.getVideoSize;\n            _this.setState({\n                playerSize: getPlayerSize(),\n                videoSize: getVideoSize()\n            }, function () {\n                if (_this.engine) {\n                    _this.engine.updateLayout(_this.state.playerSize, _this.state.videoSize);\n                    _this.syncVisibleHotspots(true);\n                }\n            });\n        };\n        _this.reset = function () {\n            _this.engine = null;\n            _this.setState(__assign({}, _this.initialState), function () {\n                _this.props.loadCuePoints(_this._handleCuepoints);\n            });\n        };\n        _this.renderHotspots = function (visualHotspot) {\n            if (!visualHotspot) {\n                return null;\n            }\n            var _a = _this.props, seekTo = _a.seekTo, pauseVideo = _a.pauseVideo, sendAnalytics = _a.sendAnalytics;\n            return visualHotspot.map(function (hotspotData) { return (h(Hotspot, { pauseVideo: pauseVideo, seekTo: seekTo, key: hotspotData.id, visible: true, hotspot: hotspotData, sendAnalytics: sendAnalytics })); });\n        };\n        return _this;\n    }\n    Stage.prototype.componentDidMount = function () {\n        this.reset();\n    };\n    Stage.prototype.syncVisibleHotspots = function (forceSnapshot) {\n        var _this = this;\n        if (forceSnapshot === void 0) { forceSnapshot = false; }\n        var getCurrentTime = this.props.getCurrentTime;\n        this.setState(function (state) {\n            if (!_this.engine) {\n                return {\n                    visibleHotspots: []\n                };\n            }\n            var hotspotsUpdate = _this.engine.updateTime(getCurrentTime(), forceSnapshot);\n            if (hotspotsUpdate.snapshot) {\n                return {\n                    visibleHotspots: hotspotsUpdate.snapshot\n                };\n            }\n            if (!hotspotsUpdate.delta) {\n                return {\n                    visibleHotspots: []\n                };\n            }\n            var _a = hotspotsUpdate.delta, show = _a.show, hide = _a.hide;\n            if (show.length !== 0 || hide.length !== 0) {\n                var visibleHotspots_1 = state.visibleHotspots;\n                show.forEach(function (hotspot) {\n                    var index = visibleHotspots_1.indexOf(hotspot);\n                    if (index === -1) {\n                        visibleHotspots_1.push(hotspot);\n                    }\n                });\n                hide.forEach(function (hotspot) {\n                    var index = visibleHotspots_1.indexOf(hotspot);\n                    if (index !== -1) {\n                        visibleHotspots_1.splice(index, 1);\n                    }\n                });\n                return {\n                    visibleHotspots: visibleHotspots_1\n                };\n            }\n        });\n    };\n    Stage.prototype.render = function () {\n        var _a = this.state, visibleHotspots = _a.visibleHotspots, showHotspots = _a.showHotspots;\n        var hotspotsElements = showHotspots ? this.renderHotspots(visibleHotspots) : null;\n        var style = {\n            position: 'absolute',\n            display: 'block',\n            overflow: 'visible',\n            top: 0,\n            left: 0,\n            width: 0,\n            height: 0\n        };\n        return (h(\"div\", { style: style }, hotspotsElements));\n    };\n    return Stage;\n}(Component));\nexport default Stage;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/Stage.tsx\n// module id = null\n// module chunks = ","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n//let poly = require(\"preact-cli/lib/lib/webpack/polyfills\");\nimport { h, render } from \"preact\";\nimport Stage, { NotifyEventTypes } from \"../components/Stage\";\nimport { log, enableLog } from \"../utils/logger\";\n(function (mw, $) {\n    function toObject(jsonAsString, defaultValue) {\n        if (defaultValue === void 0) { defaultValue = {}; }\n        if (!jsonAsString) {\n            return defaultValue;\n        }\n        try {\n            return { result: JSON.parse(jsonAsString) };\n        }\n        catch (e) {\n            return { error: e };\n        }\n    }\n    (function shouldEnableLogs() {\n        try {\n            if (document.URL.indexOf(\"debugKalturaPlayer\") !== -1) {\n                enableLog(\"hotspots\");\n            }\n        }\n        catch (e) {\n            // do nothing\n        }\n    })();\n    var WEBKIT_PLAYS_INLINE_KEY = \"EmbedPlayer.WebKitPlaysInline\";\n    function isIpad() {\n        return navigator.userAgent.indexOf(\"iPad\") != -1;\n    }\n    function isIphone() {\n        return navigator.userAgent.indexOf(\"iPhone\") != -1 && !isIpad();\n    }\n    mw.kalturaPluginWrapper(function () {\n        mw.PluginManager.add(\"hotspots\", mw.KBaseComponent.extend({\n            _root: null,\n            _videoSize: null,\n            _wasPlayed: false,\n            stage: null,\n            defaultConfig: {\n                parent: \"videoHolder\",\n                order: 1\n            },\n            handleVideoSizeChange: function (e) {\n                var _a = this.getPlayer().evaluate(\"{mediaProxy.entry}\"), width = _a.width, height = _a.height;\n                log(\"debug\", \"plugin.handleVideoSizeChange\", \"use entry size provided by player to calculate actual stage size\", { width: width, height: height });\n                if (!width || !height) {\n                    this._videoSize = null;\n                }\n                else {\n                    this._videoSize = { width: width, height: height };\n                }\n                this.stage.handleResize();\n            },\n            setup: function () {\n                if (isIphone()) {\n                    log(\"log\", \"setup\", \"iphone detected, disable plugin\");\n                    return;\n                }\n                this.addBindings();\n            },\n            seekTo: function (time) {\n                this.getPlayer().seek(time);\n            },\n            pauseVideo: function () {\n                this.getPlayer().sendNotification(\"doPause\");\n            },\n            getCuePoints: function () {\n                return this.cuePoints;\n            },\n            loadCuePoints: function (callback) {\n                var _this = this;\n                // do the api request\n                this.getKalturaClient().doRequest({\n                    service: \"cuepoint_cuepoint\",\n                    action: \"list\",\n                    \"filter:entryIdEqual\": this.getPlayer().kentryid,\n                    \"filter:objectType\": \"KalturaCuePointFilter\",\n                    \"filter:cuePointTypeEqual\": \"annotation.Annotation\",\n                    \"filter:tagsLike\": \"hotspots\"\n                }, function (data) {\n                    // if an error pop out:\n                    var hasError = !data || data.code;\n                    if (hasError) {\n                        callback({\n                            error: { message: data.code || \"failure\" }\n                        });\n                    }\n                    else {\n                        var hotspots = [];\n                        (data.objects || []).reduce(function (acc, cuePoint) {\n                            var _a = toObject(cuePoint.partnerData), partnerData = _a.result, error = _a.error;\n                            if (!partnerData ||\n                                !partnerData.schemaVersion) {\n                                log(\"warn\", \"loadCuePoints\", \"annotation '\" + cuePoint.partnerData.id + \"' has no schema version, skip annotation\");\n                                return acc;\n                            }\n                            var rawLayout = __assign({}, partnerData.layout);\n                            acc.push({\n                                id: cuePoint.id,\n                                startTime: cuePoint.startTime,\n                                endTime: cuePoint.endTime,\n                                label: cuePoint.text,\n                                styles: partnerData.styles,\n                                onClick: partnerData.onClick,\n                                rawLayout: rawLayout\n                            });\n                            return acc;\n                        }, hotspots);\n                        callback({ hotspots: hotspots });\n                    }\n                });\n            },\n            getPlayerSize: function () {\n                var videoHolder = this.getPlayer().getVideoHolder();\n                if (!videoHolder) {\n                    return null;\n                }\n                var width = videoHolder.width();\n                var height = videoHolder.height();\n                return {\n                    width: width,\n                    height: height\n                };\n            },\n            sendAnalytics: function (event) {\n                try {\n                    var kanalonyPlugin = this.getPlayer().plugins.kAnalony;\n                    if (!kanalonyPlugin) {\n                        log(\"warn\", \"sendAnalytics\", \"cannot send analytics event, missing kAnalony plugin\", event);\n                        return;\n                    }\n                    var eventNumber = event.eventNumber, rest = __rest(event, [\"eventNumber\"]);\n                    kanalonyPlugin.sendAnalytics(eventNumber, rest);\n                }\n                catch (e) {\n                    log(\"error\", \"sendAnalytics\", \"cannot send analytics event with error '\" + e.message + \"'\", event);\n                }\n            },\n            getVideoSize: function () {\n                if (!this._videoSize) {\n                    return null;\n                }\n                return __assign({}, this._videoSize);\n            },\n            addBindings: function () {\n                var _this = this;\n                this.bind(\"playerReady\", function () {\n                    var props = {\n                        getCurrentTime: _this._getCurrentTime.bind(_this),\n                        loadCuePoints: _this.loadCuePoints.bind(_this),\n                        getPlayerSize: _this.getPlayerSize.bind(_this),\n                        getVideoSize: _this.getVideoSize.bind(_this),\n                        pauseVideo: _this.pauseVideo.bind(_this),\n                        seekTo: _this.seekTo.bind(_this),\n                        sendAnalytics: _this.sendAnalytics.bind(_this)\n                    };\n                    _this._root = render(h(Stage, __assign({}, props, { ref: function (ref) { return (_this.stage = ref); } })), jQuery('[id=\"hotspotsOverlay\"]')[0]);\n                });\n                this.bind(\"updateLayout\", function () {\n                    _this.stage.handleResize();\n                });\n                this.bind(\"firstPlay\", function () {\n                    if (!_this._wasPlayed) {\n                        _this.stage.showHotspots();\n                        _this._wasPlayed = true;\n                    }\n                });\n                this.bind(\"seeked\", function () {\n                    if (!_this._wasPlayed) {\n                        _this.stage.showHotspots();\n                        _this._wasPlayed = true;\n                    }\n                });\n                this.bind(\"onChangeMedia\", function () {\n                    // DEVELOPER NOTICE: this is the destruction place.\n                    _this._wasPlayed = false;\n                    _this._videoSize = null;\n                    render(\n                    // @ts-ignore\n                    h(null), jQuery('[id=\"hotspotsOverlay\"]')[0], _this._root);\n                    _this._root = null;\n                    _this.stage = null;\n                });\n                this.bind(\"monitorEvent\", function () {\n                    _this.stage.notify({ type: NotifyEventTypes.Monitor });\n                });\n                this.bind(\"mediaLoaded\", function () {\n                    _this.handleVideoSizeChange();\n                });\n                this.bind(\"seeked\", function () {\n                    _this.stage.notify({ type: NotifyEventTypes.Seeked });\n                });\n            },\n            _getCurrentTime: function () {\n                return this.getPlayer().currentTime * 1000;\n            },\n            getComponent: function () {\n                if (!this.$el) {\n                    this.$el = jQuery(\"<div></div>\")\n                        .attr(\"id\", \"hotspotsOverlay\")\n                        .css({\n                        position: \"absolute\",\n                        height: \"0\",\n                        width: \"0\",\n                        top: 0,\n                        left: 0,\n                        overflow: 'visible'\n                    });\n                }\n                return this.$el;\n            }\n        }));\n    });\n})(window.mw, window.jQuery);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./player-v2/plugin.tsx\n// module id = null\n// module chunks = ","\"use strict\";\n!function () {\n    \"use strict\";\n    function e(e, t) {\n        var n, o, r, i, l = W;\n        for (i = arguments.length; i-- > 2;) {\n            P.push(arguments[i]);\n        }\n        t && null != t.children && (P.length || P.push(t.children), delete t.children);\n        while (P.length) {\n            if ((o = P.pop()) && void 0 !== o.pop)\n                for (i = o.length; i--;) {\n                    P.push(o[i]);\n                }\n            else\n                \"boolean\" == typeof o && (o = null), (r = \"function\" != typeof e) && (null == o ? o = \"\" : \"number\" == typeof o ? o += \"\" : \"string\" != typeof o && (r = !1)), r && n ? l[l.length - 1] += o : l === W ? l = [o] : l.push(o), n = r;\n        }\n        var a = new T();\n        return a.nodeName = e, a.children = l, a.attributes = null == t ? void 0 : t, a.key = null == t ? void 0 : t.key, void 0 !== M.vnode && M.vnode(a), a;\n    }\n    function t(e, t) {\n        for (var n in t) {\n            e[n] = t[n];\n        }\n        return e;\n    }\n    function n(e, t) {\n        e && (\"function\" == typeof e ? e(t) : e.current = t);\n    }\n    function o(n, o) {\n        return e(n.nodeName, t(t({}, n.attributes), o), arguments.length > 2 ? [].slice.call(arguments, 2) : n.children);\n    }\n    function r(e) {\n        !e.__d && (e.__d = !0) && 1 == V.push(e) && (M.debounceRendering || D)(i);\n    }\n    function i() {\n        var e;\n        while (e = V.pop()) {\n            e.__d && x(e);\n        }\n    }\n    function l(e, t, n) {\n        return \"string\" == typeof t || \"number\" == typeof t ? void 0 !== e.splitText : \"string\" == typeof t.nodeName ? !e._componentConstructor && a(e, t.nodeName) : n || e._componentConstructor === t.nodeName;\n    }\n    function a(e, t) {\n        return e.__n === t || e.nodeName.toLowerCase() === t.toLowerCase();\n    }\n    function u(e) {\n        var n = t({}, e.attributes);\n        n.children = e.children;\n        var o = e.nodeName.defaultProps;\n        if (void 0 !== o)\n            for (var r in o) {\n                void 0 === n[r] && (n[r] = o[r]);\n            }\n        return n;\n    }\n    function c(e, t) {\n        var n = t ? document.createElementNS(\"http://www.w3.org/2000/svg\", e) : document.createElement(e);\n        return n.__n = e, n;\n    }\n    function p(e) {\n        var t = e.parentNode;\n        t && t.removeChild(e);\n    }\n    function s(e, t, o, r, i) {\n        if (\"className\" === t && (t = \"class\"), \"key\" === t)\n            ;\n        else if (\"ref\" === t)\n            n(o, null), n(r, e);\n        else if (\"class\" !== t || i) {\n            if (\"style\" === t) {\n                if (r && \"string\" != typeof r && \"string\" != typeof o || (e.style.cssText = r || \"\"), r && \"object\" == typeof r) {\n                    if (\"string\" != typeof o)\n                        for (var l in o) {\n                            l in r || (e.style[l] = \"\");\n                        }\n                    for (var l in r) {\n                        e.style[l] = \"number\" == typeof r[l] && !1 === E.test(l) ? r[l] + \"px\" : r[l];\n                    }\n                }\n            }\n            else if (\"dangerouslySetInnerHTML\" === t)\n                r && (e.innerHTML = r.__html || \"\");\n            else if (\"o\" == t[0] && \"n\" == t[1]) {\n                var a = t !== (t = t.replace(/Capture$/, \"\"));\n                t = t.toLowerCase().substring(2), r ? o || e.addEventListener(t, _, a) : e.removeEventListener(t, _, a), (e.__l || (e.__l = {}))[t] = r;\n            }\n            else if (\"list\" !== t && \"type\" !== t && !i && t in e) {\n                try {\n                    e[t] = null == r ? \"\" : r;\n                }\n                catch (e) { }\n                null != r && !1 !== r || \"spellcheck\" == t || e.removeAttribute(t);\n            }\n            else {\n                var u = i && t !== (t = t.replace(/^xlink:?/, \"\"));\n                null == r || !1 === r ? u ? e.removeAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase()) : e.removeAttribute(t) : \"function\" != typeof r && (u ? e.setAttributeNS(\"http://www.w3.org/1999/xlink\", t.toLowerCase(), r) : e.setAttribute(t, r));\n            }\n        }\n        else\n            e.className = r || \"\";\n    }\n    function _(e) {\n        return this.__l[e.type](M.event && M.event(e) || e);\n    }\n    function f() {\n        var e;\n        while (e = A.shift()) {\n            M.afterMount && M.afterMount(e), e.componentDidMount && e.componentDidMount();\n        }\n    }\n    function d(e, t, n, o, r, i) {\n        H++ || (R = null != r && void 0 !== r.ownerSVGElement, B = null != e && !(\"__preactattr_\" in e));\n        var l = h(e, t, n, o, i);\n        return r && l.parentNode !== r && r.appendChild(l), --H || (B = !1, i || f()), l;\n    }\n    function h(e, t, n, o, r) {\n        var i = e, l = R;\n        if (null != t && \"boolean\" != typeof t || (t = \"\"), \"string\" == typeof t || \"number\" == typeof t)\n            return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != t && (e.nodeValue = t) : (i = document.createTextNode(t), e && (e.parentNode && e.parentNode.replaceChild(i, e), v(e, !0))), i.__preactattr_ = !0, i;\n        var u = t.nodeName;\n        if (\"function\" == typeof u)\n            return N(e, t, n, o);\n        if (R = \"svg\" === u || \"foreignObject\" !== u && R, u += \"\", (!e || !a(e, u)) && (i = c(u, R), e)) {\n            while (e.firstChild) {\n                i.appendChild(e.firstChild);\n            }\n            e.parentNode && e.parentNode.replaceChild(i, e), v(e, !0);\n        }\n        var p = i.firstChild, s = i.__preactattr_, _ = t.children;\n        if (null == s) {\n            s = i.__preactattr_ = {};\n            for (var f = i.attributes, d = f.length; d--;) {\n                s[f[d].name] = f[d].value;\n            }\n        }\n        return !B && _ && 1 === _.length && \"string\" == typeof _[0] && null != p && void 0 !== p.splitText && null == p.nextSibling ? p.nodeValue != _[0] && (p.nodeValue = _[0]) : (_ && _.length || null != p) && m(i, _, n, o, B || null != s.dangerouslySetInnerHTML), y(i, t.attributes, s), R = l, i;\n    }\n    function m(e, t, n, o, r) {\n        var i, a, u, c, s, _ = e.childNodes, f = [], d = {}, m = 0, b = 0, y = _.length, g = 0, w = t ? t.length : 0;\n        if (0 !== y)\n            for (var C = 0; C < y; C++) {\n                var x = _[C], N = x.__preactattr_, k = w && N ? x._component ? x._component.__k : N.key : null;\n                null != k ? (m++, d[k] = x) : (N || (void 0 !== x.splitText ? !r || x.nodeValue.trim() : r)) && (f[g++] = x);\n            }\n        if (0 !== w)\n            for (var C = 0; C < w; C++) {\n                c = t[C], s = null;\n                var k = c.key;\n                if (null != k)\n                    m && void 0 !== d[k] && (s = d[k], d[k] = void 0, m--);\n                else if (b < g)\n                    for (i = b; i < g; i++) {\n                        if (void 0 !== f[i] && l(a = f[i], c, r)) {\n                            s = a, f[i] = void 0, i === g - 1 && g--, i === b && b++;\n                            break;\n                        }\n                    }\n                s = h(s, c, n, o), u = _[C], s && s !== e && s !== u && (null == u ? e.appendChild(s) : s === u.nextSibling ? p(u) : e.insertBefore(s, u));\n            }\n        if (m)\n            for (var C in d) {\n                void 0 !== d[C] && v(d[C], !1);\n            }\n        while (b <= g) {\n            void 0 !== (s = f[g--]) && v(s, !1);\n        }\n    }\n    function v(e, t) {\n        var o = e._component;\n        o ? k(o) : (null != e.__preactattr_ && n(e.__preactattr_.ref, null), !1 !== t && null != e.__preactattr_ || p(e), b(e));\n    }\n    function b(e) {\n        e = e.lastChild;\n        while (e) {\n            var t = e.previousSibling;\n            v(e, !0), e = t;\n        }\n    }\n    function y(e, t, n) {\n        var o;\n        for (o in n) {\n            t && null != t[o] || null == n[o] || s(e, o, n[o], n[o] = void 0, R);\n        }\n        for (o in t) {\n            \"children\" === o || \"innerHTML\" === o || o in n && t[o] === (\"value\" === o || \"checked\" === o ? e[o] : n[o]) || s(e, o, n[o], n[o] = t[o], R);\n        }\n    }\n    function g(e, t, n) {\n        var o, r = F.length;\n        e.prototype && e.prototype.render ? (o = new e(t, n), U.call(o, t, n)) : (o = new U(t, n), o.constructor = e, o.render = w);\n        while (r--) {\n            if (F[r].constructor === e)\n                return o.__b = F[r].__b, F.splice(r, 1), o;\n        }\n        return o;\n    }\n    function w(e, t, n) {\n        return this.constructor(e, n);\n    }\n    function C(e, t, o, i, l) {\n        e.__x || (e.__x = !0, e.__r = t.ref, e.__k = t.key, delete t.ref, delete t.key, void 0 === e.constructor.getDerivedStateFromProps && (!e.base || l ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(t, i)), i && i !== e.context && (e.__c || (e.__c = e.context), e.context = i), e.__p || (e.__p = e.props), e.props = t, e.__x = !1, 0 !== o && (1 !== o && !1 === M.syncComponentUpdates && e.base ? r(e) : x(e, 1, l)), n(e.__r, e));\n    }\n    function x(e, n, o, r) {\n        if (!e.__x) {\n            var i, l, a, c = e.props, p = e.state, s = e.context, _ = e.__p || c, h = e.__s || p, m = e.__c || s, b = e.base, y = e.__b, w = b || y, N = e._component, U = !1, S = m;\n            if (e.constructor.getDerivedStateFromProps && (p = t(t({}, p), e.constructor.getDerivedStateFromProps(c, p)), e.state = p), b && (e.props = _, e.state = h, e.context = m, 2 !== n && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(c, p, s) ? U = !0 : e.componentWillUpdate && e.componentWillUpdate(c, p, s), e.props = c, e.state = p, e.context = s), e.__p = e.__s = e.__c = e.__b = null, e.__d = !1, !U) {\n                i = e.render(c, p, s), e.getChildContext && (s = t(t({}, s), e.getChildContext())), b && e.getSnapshotBeforeUpdate && (S = e.getSnapshotBeforeUpdate(_, h));\n                var L, T, P = i && i.nodeName;\n                if (\"function\" == typeof P) {\n                    var W = u(i);\n                    l = N, l && l.constructor === P && W.key == l.__k ? C(l, W, 1, s, !1) : (L = l, e._component = l = g(P, W, s), l.__b = l.__b || y, l.__u = e, C(l, W, 0, s, !1), x(l, 1, o, !0)), T = l.base;\n                }\n                else\n                    a = w, L = N, L && (a = e._component = null), (w || 1 === n) && (a && (a._component = null), T = d(a, i, s, o || !b, w && w.parentNode, !0));\n                if (w && T !== w && l !== N) {\n                    var D = w.parentNode;\n                    D && T !== D && (D.replaceChild(T, w), L || (w._component = null, v(w, !1)));\n                }\n                if (L && k(L), e.base = T, T && !r) {\n                    var E = e, V = e;\n                    while (V = V.__u) {\n                        (E = V).base = T;\n                    }\n                    T._component = E, T._componentConstructor = E.constructor;\n                }\n            }\n            !b || o ? A.push(e) : U || (e.componentDidUpdate && e.componentDidUpdate(_, h, S), M.afterUpdate && M.afterUpdate(e));\n            while (e.__h.length) {\n                e.__h.pop().call(e);\n            }\n            H || r || f();\n        }\n    }\n    function N(e, t, n, o) {\n        var r = e && e._component, i = r, l = e, a = r && e._componentConstructor === t.nodeName, c = a, p = u(t);\n        while (r && !c && (r = r.__u)) {\n            c = r.constructor === t.nodeName;\n        }\n        return r && c && (!o || r._component) ? (C(r, p, 3, n, o), e = r.base) : (i && !a && (k(i), e = l = null), r = g(t.nodeName, p, n), e && !r.__b && (r.__b = e, l = null), C(r, p, 1, n, o), e = r.base, l && e !== l && (l._component = null, v(l, !1))), e;\n    }\n    function k(e) {\n        M.beforeUnmount && M.beforeUnmount(e);\n        var t = e.base;\n        e.__x = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;\n        var o = e._component;\n        o ? k(o) : t && (null != t.__preactattr_ && n(t.__preactattr_.ref, null), e.__b = t, p(t), F.push(e), b(t)), n(e.__r, null);\n    }\n    function U(e, t) {\n        this.__d = !0, this.context = t, this.props = e, this.state = this.state || {}, this.__h = [];\n    }\n    function S(e, t, n) {\n        return d(n, e, {}, !1, t, !1);\n    }\n    function L() {\n        return {};\n    }\n    var T = function T() { }, M = {}, P = [], W = [], D = \"function\" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout, E = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i, V = [], A = [], H = 0, R = !1, B = !1, F = [];\n    t(U.prototype, { setState: function setState(e, n) {\n            this.__s || (this.__s = this.state), this.state = t(t({}, this.state), \"function\" == typeof e ? e(this.state, this.props) : e), n && this.__h.push(n), r(this);\n        }, forceUpdate: function forceUpdate(e) {\n            e && this.__h.push(e), x(this, 2);\n        }, render: function render() { } });\n    var j = { h: e, createElement: e, cloneElement: o, createRef: L, Component: U, render: S, rerender: i, options: M };\n    \"undefined\" != typeof module ? module.exports = j : self.preact = j;\n}();\n//# sourceMappingURL=preact.min.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/preact/dist/preact.min.js\n// module id = KM04\n// module chunks = 0","'use strict';\nvar _preact = require('preact');\nif (process.env.NODE_ENV === 'development') {\n    require('preact/devtools');\n}\nelse if (process.env.ADD_SW && 'serviceWorker' in navigator && location.protocol === 'https:') {\n    navigator.serviceWorker.register(__webpack_public_path__ + 'sw.js');\n}\nvar interopDefault = function interopDefault(m) {\n    return m && m[\"default\"] ? m[\"default\"] : m;\n};\nvar app = interopDefault(require('preact-cli-entrypoint'));\nif (typeof app === 'function') {\n    var root = document.body.firstElementChild;\n    var init = function init() {\n        var app = interopDefault(require('preact-cli-entrypoint'));\n        root = (0, _preact.render)((0, _preact.h)(app), document.body, root);\n    };\n    if (module.hot)\n        module.hot.accept('preact-cli-entrypoint', init);\n    init();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../node_modules/preact-cli/lib/lib/entry.js\n// module id = pwNi\n// module chunks = 0"],"sourceRoot":""}