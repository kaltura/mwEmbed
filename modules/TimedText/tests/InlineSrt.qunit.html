<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>Inline SRT Sources</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
	<script type="text/javascript" src="jquery.cookie.js"></script>
	<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
</head>
<body>
<h3> Inline SRT Sources </h3>

 <video id="subtitlePlayer" style="width:544px;height:304px;"
 		poster="http://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Elephants_Dream.ogg/seek%3D13-Elephants_Dream.ogg.jpg"
 		durationHint="10:53"
 		linkback="http://www.elephantsdream.org/" >
 		
<source type="video/ogg" src="http://upload.wikimedia.org/wikipedia/commons/b/bd/Elephants_Dream.ogg" ></source>
<source type="video/h264" src="http://www.archive.org/download/ElephantsDream/ed_1024_512kb.mp4"></source>


	<!--  Subtitles -->

      <track kind="subtitles" id="video_af" srclang="af"
             src="media/elephants_dream/elephant.afrikaans.srt"></track>

      <track kind="subtitles" id="video_ar" srclang="ar"
             src="media/elephants_dream/elephant.arabic.srt"></track>

      <track kind="subtitles" id="video_bn" srclang="bn"
             src="media/elephants_dream/elephant.bangla.srt"></track>

      <track kind="subtitles" id="video_br" srclang="br"
             src="media/elephants_dream/elephant.breton.srt"></track>

      <track kind="subtitles" id="video_bg" srclang="bg"
             src="media/elephants_dream/elephant.bulgarian.srt"></track>

      <track kind="subtitles" id="video_ca" srclang="ca"
             src="media/elephants_dream/elephant.catalan-utf8.srt"></track>

      <track kind="subtitles" id="video_zh" srclang="zh"
             src="media/elephants_dream/elephant.chinese.srt"></track>

      <track kind="subtitles" id="video_cz" srclang="cs"
             src="media/elephants_dream/elephant.czech.srt"></track>

      <track kind="subtitles" id="video_da" srclang="da"
             src="media/elephants_dream/elephant.danish.srt"></track>

      <track kind="subtitles" id="video_nl" srclang="nl"
             src="media/elephants_dream/elephant.dutch.srt"></track>

      <track kind="subtitles" id="video_en" srclang="en"
             src="media/elephants_dream/elephant.english.srt"></track>

      <track kind="subtitles" id="video_et" srclang="et"
             src="media/elephants_dream/elephant.estonian.srt"></track>

      <track kind="subtitles" id="video_fi" srclang="fi"
             src="media/elephants_dream/elephant.finnish.srt"></track>

     <track kind="subtitles" id="video_fr" srclang="fr"
            src="media/elephants_dream/elephant.french.srt"></track>

      <track kind="subtitles" id="video_de" srclang="de"
             src="media/elephants_dream/elephant.german.srt"></track>

      <track kind="subtitles" id="video_el" srclang="el"
             src="media/elephants_dream/elephant.greek.srt"></track>

      <track kind="subtitles" id="video_he" srclang="he"
             src="media/elephants_dream/elephant.hebrew.srt"></track>

      <track kind="subtitles" id="video_hu" srclang="hu"
             src="media/elephants_dream/elephant.hungarian-utf8.srt"></track>

      <track kind="subtitles" id="video_it" srclang="it"
             src="media/elephants_dream/elephant.italian.srt"></track>

      <track kind="subtitles" id="video_ja" srclang="ja"
             src="media/elephants_dream/elephant.japanese.srt"></track>

      <track kind="subtitles" id="video_ja" srclang="ja"
              src="media/elephants_dream/elephant.japanese-euc.srt"></track>

      <track kind="subtitles" id="video_mt" srclang="mt"
             src="media/elephants_dream/elephant.maltese_utf8.srt"></track>

      <track kind="subtitles" id="video_nn" srclang="nn"
             src="media/elephants_dream/elephant.norwegian.srt"></track>

      <track kind="subtitles" id="video_pl" srclang="pl"
             src="media/elephants_dream/elephant.polish.srt"></track>

      <track kind="subtitles" id="video_pt" srclang="pt"
             src="media/elephants_dream/elephant.portuguese.srt"></track>

      <track kind="subtitles" id="video_pt_br" srclang="pt-br"
             src="media/elephants_dream/elephant.brazilian.srt"></track>

      <track kind="subtitles" id="video_ro" srclang="ro"
             src="media/elephants_dream/elephant.romanian.srt"></track>

      <track kind="subtitles" id="video_ru" srclang="ru"
             src="media/elephants_dream/elephant.russian.srt"></track>


	<!--  Captions -->
      <track kind="captions" id="video_sl" srclang="sl"
             src="media/elephants_dream/elephant.slovenian.srt"></track>

      <track kind="captions" id="video_es" srclang="es"
             src="media/elephants_dream/elephant.spanish.srt"></track>

      <track kind="captions" id="video_es_mx" srclang="es-mx"
             src="media/elephants_dream/elephant.spanish-us.srt"></track>

      <track kind="captions" id="video_sk" srclang="sk"
             src="media/elephants_dream/elephant.slovak.srt"></track>

      <track kind="captions" id="video_sv" srclang="sv"
             src="media/elephants_dream/elephant.swedish.srt"></track>


    <!-- Audio Description -->
      <track kind="descriptions" id="audiodesc" srclang="en"
             src="media/elephants_dream/audiodescription.srt"></track>

    <!-- Chapters -->
      <track kind="chapters" id="chapters" srclang="en" label="Chapters"
             src="media/elephants_dream/chapters.srt"></track>

	</video>
<script type="text/javascript">
	// TMML is not friendly to dynamic playhead positions ( assumes static play control bar ) 
	mw.setConfig( 'EmbedPlayer.OverlayControls', false );
	// Show controls for timed text on ipad
	mw.setConfig( 'EmbedPlayer.EnableIpadHTMLControls', true);

	
 	if( window['QUnit'] ){
 		// Clear the cookie for the test
 		$.cookie( 'TimedText.Preferences', false );

 		// if running a test give iOS persistant native player
		if( kIsIOS() ){
			$('#subtitlePlayer').addClass( "persistentNativePlayer" );
		}
 		
 		QUnit.start();
 		// Name this module
 		module( "TimedText SRT" );
 		
 		asyncTest( "Subtitles displayed", function(){

 			mw.ready(function(){
 				var vid = $('#subtitlePlayer').get(0);
 				QUnit.ok(true, "Player Loaded");

 				$( vid ).bind("seeked", function(){
 					equal( $('.track span').text(), "At the left we can see...", "Subtitle displayed at seek time 16" );
 					start();
 				});
 				vid.play();
 				setTimeout(function(){
 					vid.pause();
 					vid.currentTime = 16;
 				}, 2000);
	 		});
 		});
 	}
 	</script>
	
</body>
</html>

