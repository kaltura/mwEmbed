<!DOCTYPE HTML>
<html>
  <head>
	<title>VPAID </title>
	<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
	<script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
  </head>
  <body>
	<h1>
	VPAID 2.0
	</h1>
	<br>
<div id="myVideoTarget" style="width:400px;height:330px;"></div>
<h3>VPAID 2.0</h3>
    The IAB's Video Player Ad-Serving Interface Definition (VPAID) establishes a common interface   <br/>
    between video players and ad units, enabling a rich interactive in-streamad experience.              <br/>
    More details can be found <a href="http://www.iab.net/media/file/VPAID_2.0_Final_04-10-2012.pdf">here</a>
<br>
 <h3>How VPAID works?</h3>
    <img src='images/vpaid.png'/>

    <ol>
    <li> Call: The player makes an ad call to the ad server. The format for this ad call is not
    specified in these guidelines in order to maintain flexibility for the many variations of
    ad server formats.
        </li>
        <li>Response: The ad server responds with a VAST XML containing a VPAID-compliant
    executable ad unit. </li>
        <li>Ongoing Communication: The video player and the ad unit remain in
    communication as the ad executes and displays to the user.
   Using VPAID.<br>
    player can get and set properties for the ad unit, and the ad unit can dispatch events
    to the video player.                                </li>
        <li>Tracking Impressions & Activities: The video player and the ad unit can each
    send impression and activity tracking requests to their respective ad servers (ad server
    tracking is not specified by VPAID).                </li>
    </ol>
<br>
<h3>What is implemented in Kaltura?</h3>
    <h4>Flash - KDP</h4>
        Full support in VPAID 1.1      <br/>
        Missing items for VPAID 2.0:  <br/>
            <ul>
                <li>Skip event - AdSkipped event is not implemented yet</li>

            </ul>
    <h4>HTML5</h4>
    The process of HTML5 VPAID:<br/>
    <ul>
        <li>call to initAd with the following environment params:    <br/>
            initAd(width : Number, height : Number, viewMode : String, desiredBitrate : Number,
            [creativeData : String], [environmentVars : String]) : void

                <ul>
                    <li>
                        Slot : the Player container .
                    </li>
                    <li>

                        videoSlot:  The player element.

                    </li>
                    <li>
                        videoSlotCanAutoPlay: can you auto play the VPAID element.
                    </li>
                </ul>

            </ul>
        </li>
        <li> Listen to the following events:
            <ul>
                <li>AdLoaded : call to startAd and track the ad</li>
                <li>AdStopped : remove the ad and continue the video</li>
                <li>AdError : remove the ad and continue the video + log the error</li>
                <li>AdLog : ...</li>
            </ul>
        </li>
    </ul>



<script>
    var localPath = document.location.href;
    localPath = localPath.split('VPAID.html')[0];
	kWidget.featureConfig({
		'targetId': 'myVideoTarget',
		'wid': '_243342',
		'uiconf_id' : '10199512',
		'entry_id' : '0_uka1msg4',
		'flashvars': {
        'debugMode':true,
        'jsTraces':true,
            kdpUrl:'/kdp3/bin-debug/kdp3.swf',
			'vast': {
				//'plugin' : true,
				'numPreroll':"1", 
				'prerollInterval':"1",
				'prerollStartWith':"1",
               // 'prerollUrl':"http://projects.kaltura.com/Itay/html5VPAID/vpaid.xml",
				'prerollUrl':localPath+"liverail.xml",
				//'overlayStartAt':"20",
			//	'overlayInterval':"300",
			//	'overlayUrl':"http://projects.kaltura.com/MichalR/vast_overlay.xml",
			//	'numPostroll':"1",
			//	'postrollInterval':"1",
			//	'postrollStartWith':"1",
			//	'postrollUrl':"http://projects.kaltura.com/mdale/hotelVastAd.xml",
				'preSequence':"1",
				'postSequence':"1",
				'timeout':"4"
			},
			'adsOnReplay':true
		}
	})
</script>
    <br>
 	<!-- 
 	<layout id="full" name="Ad Support" skinPath="/content/uiconf/kaltura/kmc/appstudio/kdp3/cassiopea/skin.swf?a=2">
  <HBox id="topLevel" width="100%" height="100%">
    <VBox id="player" width="100%" height="100%" styleName="black">
      <Plugin id="kalturaMix" width="0%" height="0%" includeInLayout="false" loadingPolicy="onDemand"/>
      <Plugin id="statistics" width="0%" height="0%" includeInLayout="false"/>
      
      <Plugin id="vast" 
      	numPreroll="1" 
      	prerollInterval="1" 
      	prerollStartWith="1" 
      	prerollUrl="http://d1.openx.org/fc.php?script=bannerTypeHtml:vastInlineBannerTypeHtml:vastInlineHtml&amp;source=&amp;format=vast&amp;charset=UTF_8&amp;nz=1&amp;zones=z1=182104" 
      	overlayStartAt="20" 
      	overlayInterval="300" 
      	overlayUrl="http://kaldev.kaltura.com/myopenx/www/delivery/fc.php?script=bannerTypeHtml:vastInlineBannerTypeHtml:vastInlineHtml&amp;source=&amp;format=vast&amp;charset=UTF_8&amp;nz=1&amp;zones=z1=19"
      	numPostroll="1" 
      	postrollInterval="1" 
      	postrollStartWith="1" 
      	postrollUrl="http://d1.openx.org/fc.php?script=bannerTypeHtml:vastInlineBannerTypeHtml:vastInlineHtml&amp;source=&amp;format=vast&amp;charset=UTF_8&amp;nz=1&amp;zones=z1=182104" 
      	preSequence="1" 
      	postSequence="1" 
      	timeout="4"
      />
      <Canvas id="PlayerHolder" height="100%" width="100%" styleName="black">
        <Video id="video" width="100%" height="100%"/>
        <Label id="noticeMessage" text="Video will start in {sequenceProxy.timeRemaining} seconds" height="18" width="100%" font="TimesNewRoman" styleName="movieName" dynamicColor="true" color1="14540253" visible="{sequenceProxy.isAdLoaded}" includeInLayout="{sequenceProxy.isAdLoaded}"/>
        <VBox id="offlineMessageHolder" verticalAlign="middle" horizontalAlign="center" includeInLayout="false" width="100%" height="100%">
          <Spacer height="100%"/>
          <Spacer height="100%"/>
          <Label id="offlineMessage" styleName="offlineMessage" text="{mediaProxy.entry.offlineMessage}" visible="{mediaProxy.isOffline}" width="100%" height="30"/>
          <Spacer height="100%"/>
        </VBox>
        <Screens id="screensLayer" width="100%" height="100%" mouseOverTarget="{PlayerHolder}" styleName="clickThrough" startScreenId="startScreen" startScreenOverId="startScreen" pauseScreenOverId="pauseScreen" pauseScreenId="pauseScreen" playScreenOverId="playScreen" endScreenId="endScreen" endScreenOverId="endScreen"/>
        <Plugin id="overlay" swfUrls="{vast.overlays}" overlayStartAt="{vast.overlayStartAt}" overlayInterval="{vast.overlayInterval}" displayDuration="5" width="100%" height="100%"/>
        
        <VBox id="skipBtnHolder" width="100%" height="100%">
          <Spacer height="100%"/>
          <HBox width="100%" height="30">
            <Spacer width="100%"/>
            <Button id="skipBtn" visible="{sequenceProxy.isAdSkip}" includeInLayout="{sequenceProxy.isAdSkip}" type="labelButton" color1="14540253" color2="16777215" styleName="controllerScreen" height="30" width="20" allowDisable="false" label="skip ad >" kClick="sendNotification('sequenceSkipNext')"/>
          </HBox>
        </VBox>
        
        <VBox id="generalPluginContainer" width="100%" height="100%">
          <Spacer id="contentPusher" height="100%"/>
        </VBox>
      </Canvas>
      <Canvas id="controlsHolder" width="100%" height="30">
        <HBox id="ControllerScreenHolder" width="100%" height="30" verticalAlign="middle" styleName="darkBg">
          <HBox id="ControllerScreen" width="100%" height="30" horizontalGap="9" paddingLeft="9" verticalAlign="middle" styleName="darkBg">
            <Button id="playBtnControllerScreen" command="play" buttonType="iconButton" focusRectPadding="0" icon="playIcon" overIcon="playIcon" downIcon="playIcon" disabeledIcon="playIcon" selectedUpIcon="pauseIcon" selectedOverIcon="pauseIcon" selectedDownIcon="pauseIcon" selectedDisabledIcon="pauseIcon" tooltip="" upTooltip="Pause" selectedTooltip="Play" k_buttonType="buttonIconControllerArea" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
            <Button id="liveToggleStatus" toggle="true" color1="0xFF0000" color2="0xFF0000" upIcon="onAirIcon" overIcon="onAirIcon" downIcon="onAirIcon" disabeledIcon="onAirIcon" selectedUpIcon="offlineIcon" selectedOverIcon="offlineIcon" selectedDownIcon="offlineIcon" selectedDisabledIcon="offlineIcon" isSelected="{mediaProxy.isOffline}" visible="{mediaProxy.isLive}" includeInLayout="{mediaProxy.isLive}" mouseEnable="false" useHandCursor=""/>
            <VBox id="scrubberContainer" width="100%" height="30" verticalAlign="middle" verticalGap="-3" notVisible="{mediaProxy.isLive}">
              <Spacer height="10"/>
              <Scrubber id="scrubber" width="100%" height="10" styleName="" color1="14540253" color2="14540253"/>
              <HBox width="100%">
                <Timer id="timerControllerScreen1" width="40" styleName="timerProgressLeft" format="mm:ss" height="12" dynamicColor="true" timerType="forwards" color1="14540253"/>
                <Spacer width="100%" height="8"/>
                <Timer id="timerControllerScreen2" width="40" styleName="timerProgressRight" format="mm:ss" height="12" timerType="total" dynamicColor="true" color1="14540253"/>
              </HBox>
            </VBox>
            <VolumeBar id="volumeBar" styleName="volumeBtn" width="20" buttonType="iconButton" tooltip="Change volume" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
            <Button id="fullScreenBtnControllerScreen" command="fullScreen" buttonType="iconButton" height="22" styleName="controllerScreen" icon="openFullScreenIcon" selectedUpIcon="closeFullScreenIcong" selectedOverIcon="closeFullScreenIcon" selectedDownIcon="closeFullScreenIcon" selectedDisabledIcon="closeFullScreenIcon" focusRectPadding="0" allowDisable="false" tooltip="Toggle fullscreen" k_buttonType="buttonIconControllerArea" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
          </HBox>
          <Spacer width="13"/>
          <Button id="kalturaLogo" height="50" width="100" kClick="navigate('http://www.kaltura.com')" styleName="controllerScreen" icon="kalturaLogo"/>
          <Spacer width="13"/>
        </HBox>
      </Canvas>
    </VBox>
  </HBox>
  <screens>
    <screen id="startScreen">
      <VBox id="startContainer" width="100%" height="100%" verticalAlign="middle" horizontalAlign="center">
        <Spacer width="100%"/>
        <Tile id="startTile" width="100%" verticalGap="10" verticalAlign="middle" horizontalAlign="center">
          <Button id="onVideoPlayBtnStartScreen" command="play" buttonType="onScreenButton" minWidth="60" labelPlacement="top" label="Play" styleName="onScreenBtn" upIcon="playIcon" overIcon="playIcon" downIcon="playIcon" disabeledIcon="playIcon" selectedUpIcon="playIcon" selectedOverIcon="playIcon" selectedDownIcon="playIcon" selectedDisabledIcon="playIcon" k_buttonType="buttonIconControllerArea" tooltip="Play video" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
        </Tile>
        <Spacer width="100%"/>
      </VBox>
    </screen>
    <screen id="pauseScreen">
      <VBox id="pauseContainer" width="100%" height="100%" verticalAlign="middle" horizontalAlign="center">
        <Spacer height="100%"/>
        <Tile id="pauseTile" width="100%" verticalGap="10" verticalAlign="middle" horizontalAlign="center">
          <Button id="onVideoPlayBtnPauseScreen" command="play" buttonType="onScreenButton" minWidth="60" labelPlacement="top" label="Play" styleName="onScreenBtn" upIcon="playIcon" overIcon="playIcon" downIcon="playIcon" disabeledIcon="playIcon" selectedUpIcon="playIcon" selectedOverIcon="playIcon" selectedDownIcon="playIcon" selectedDisabledIcon="playIcon" k_buttonType="buttonIconControllerArea" tooltip="Play video" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
        </Tile>
        <Spacer height="100%"/>
      </VBox>
    </screen>
    <screen id="playScreen">
      <VBox id="playContainer" width="100%" height="100%" verticalAlign="middle" horizontalAlign="center">
        <Spacer height="100%"/>
        <Tile id="playTile" width="100%" verticalGap="10" verticalAlign="middle" horizontalAlign="center"/>
        <Spacer height="100%"/>
      </VBox>
    </screen>
    <screen id="endScreen">
      <VBox id="endContainer" width="100%" height="100%" verticalAlign="middle" horizontalAlign="center">
        <Spacer height="100%"/>
        <Tile id="endTile" width="100%" verticalGap="10" verticalAlign="middle" horizontalAlign="center">
          <Button id="replayBtnEndScreen" kClick="sendNotification('doPlay')" buttonType="onScreenButton" minWidth="60" labelPlacement="top" label="Replay" styleName="onScreenBtn" upIcon="replayIcon" k_buttonType="buttonIconControllerArea" tooltip="Replay" color1="14540253" color2="16777215" color3="3355443" color4="10066329" color5="16777215" font="Arial"/>
        </Tile>
        <Spacer height="100%"/>
      </VBox>
    </screen>
  </screens>
  <strings/>
  <extraData>
    <GigyaUI theme="dark">
      <config>
        <display showEmail="true" useTransitions="true" showBookmark="true" codeBoxHeight="auto" showCodeBox="true" showCloseButton="true" networksWithCodeBox="" networksToHide="livespaces, piczo, orkut, pageflakes, vox, tagged, hi5, wordpress, multiply" networksToShow="myspace, facebook, bebo, blogger, freewebs, livejournal, blackplanet, myyearbook, typepad, xanga, igoogle, netvibes, migente, friendster" bookmarksToShow="googlebookmarks,delicious,digg,facebookshare,newsvine,reddit,twitter,ask,myaol,slashdot,skimbit,simpy,blogmarks,spurl,linkagogo,Magnolia,faves,segnalo,netvouz,blinklist,dropjack,feedmelinks"/>
        <body>
          <background frame-color="#BFBFBF" background-color="#292929" frame-thickness="0" gradient-color-begin="#292929" gradient-color-end="#292929" corner-roundness="0;0;0;0"/>
          <controls corner-roundness="4;4;4;4" gradient-color-begin="#EAEAEA" gradient-color-end="#F4F4F4" bold="false">
            <snbuttons type="textUnder" frame-color="#666666" background-color="#292929" over-frame-color="#FFFFFF" color="#BFBFBF" gradient-color-begin="#666666" gradient-color-end="Transparent" size="10" bold="false" down-frame-color="#666666" down-gradient-color-begin="Transparent" over-gradient-color-end="#ffffff" down-gradient-color-end="#666666" over-color="#ffffff" down-color="#ffffff" over-bold="false">
              <more frame-color="#A4DBFF" over-frame-color="#A4DBFF" gradient-color-begin="#F4F4F4" gradient-color-end="#BBE4FF" over-gradient-color-begin="#A4DBFF" over-gradient-color-end="#F4F4F4"/>
              <previous frame-color="#BBE4FF" over-frame-color="#A4DBFF" gradient-color-begin="#FFFFFF" gradient-color-end="#A4DBFF" over-gradient-color-begin="#A4DBFF" over-gradient-color-end="#F4F4F4"/>
            </snbuttons>
            <textboxes frame-color="#CACACA" background-color="#292929" color="#757575" gradient-color-begin="#292929" gradient-color-end="#292929" bold="false">
              <codeboxes color="#808080" frame-color="#6A6A6A" background-color="#606060" gradient-color-begin="Transparent" gradient-color-end="Transparent" size="10"/>
              <inputs frame-color="#6a6a6a" color="#808080" gradient-color-begin="Transparent" gradient-color-end="Transparent"/>
              <dropdowns list-item-over-color="#52A4DA" frame-color="#6a6a6a" background-color="#292929" color="#808080" gradient-color-begin="#292929" gradient-color-end="#292929"/>
            </textboxes>
            <buttons frame-color="#6a6a6a" background-color="Transparent" gradient-color-begin="#666666" gradient-color-end="Transparent" color="#FFFFFF" frame-thickness="1" size="12" bold="false" over-frame-color="#FFFFFF" down-frame-color="#6a6a6a" over-gradient-color-begin="#666666" down-gradient-color-begin="Transparent" over-gradient-color-end="#353535" down-gradient-color-end="Transparent" over-size="12" over-bold="false">
              <post-buttons frame-color="#6a6a6a" gradient-color-end="Transparent"/>
            </buttons>
            <listboxes frame-color="#CACACA" corner-roundness="4;4;4;4" gradient-color-begin="#F4F4F4" gradient-color-end="#FFFFFF"/>
            <checkboxes checkmark-color="#FFFFC8" frame-color="#6a6a6a" down-gradient-color-begin="#292929" down-gradient-color-end="#292929" background-color="#292929" corner-roundness="3;3;3;3" gradient-color-begin="Transparent" gradient-color-end="Transparent" over-background-color="#292929" down-background-color="#292929"/>
            <servicemarker gradient-color-begin="Transparent" gradient-color-end="#666666"/>
            <tooltips frame-thickness="0" color="#292929" gradient-color-begin="#FFFFFF" gradient-color-end="#FFFFC8" size="10" frame-color="#FFDBA4"/>
          </controls>
          <texts color="808080">
            <privacy color="#808080"/>
            <headers color="#FFFFFF" bold="false"/>
            <labels color="#FFFFFF" bold="false"/>
            <messages color="#202020" background-color="#FFFFA4" frame-thickness="0" corner-roundness="4;4;4;4"/>
            <links color="#FFFFFF" underline="false" over-color="#666666" down-color="#666666" down-bold="false"/>
          </texts>
        </body>
      </config>
    </GigyaUI>
  </extraData>
  <plugins/>
  <uiVars>
    <var key="video.keepAspectRatio" value="true"/>
    <var key="playlistAPI.autoContinue" value="false"/>
    <var key="imageDefaultDuration" value="2"/>
    <var key="autoPlay" value="false"/>
    <var key="autoMute" value="false"/>
  </uiVars>
</layout>
 	 -->
  </body>
</html>