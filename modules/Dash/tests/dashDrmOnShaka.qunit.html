<html>
<head>
    <script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
    <script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
    <script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
</head>
<body>
<h2>DRM dash using shaka</h2>
<div id="kaltura_player_1453904613" style="width: 560px; height: 395px;" itemprop="video" itemscope itemtype="http://schema.org/VideoObject"></div>

<script>
    kWidget.embed({
        "targetId": "kaltura_player_1453904613",
//        "wid": "_4171",
//        "uiconf_id": 15190234,
//        "entry_id": "0_2jiaa9tb",
        "wid": "_4171",
        "uiconf_id": 15190235,
        "entry_id": "0_nq4v8mc2",
        "flashvars": {
            'doubleClick':{
                'plugin':false,
                'adTagUrl': 'http://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=xml_vmap1&unviewed_position_start=1&cust_params=sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[timestamp]',
                'disableCompanionAds' : false,
                'debugMode':false            },
            'skipBtn':{
                'plugin': true,
                'label': "Skip this ad",
                'skipOffset': 1
            },
            "audioSelector": {
                "plugin": false
            },
            "streamerType": "auto",
//            "dash" : {
//                "plugin": false
//            },
            "multiDrm": {
                "plugin": true,
                "licenseRequestTimeout": 5000,
                "manifestRequestTimeout": 5000,
                "fragmentRequestTimeout": 5000,
                "ignoreManifestBufferSettings": true,
                "ABRParameters": {
                    "downloadRatioSafetyFactor": 1.5,
                    "qualitySwitchThreshold": 2000,
                    "bandwidthSafetyFactor" : 1.5,
                    "minBufferLength": 8,
                    "maxBufferLength": 15
                }
            },
            "closedCaptions": {
                "useExternalClosedCaptions":true,
                "layout": "ontop",
                "displayCaptions": false,
                "fontFamily": "Arial",
                "fontsize": 12,
                "fontColor": "#000000",
                "bg": "#ffffff",
                "useGlow": false,
                "glowBlur": 0,
                "glowColor": "#ffffff",
                "showEmbeddedCaptions": true,
                "plugin": false
            },
            "disableHLSOnJs":true
        },
        "cache_st": 1453904613




        ,readyCallback: function(videoid){
            var kdp = document.getElementById(videoid);
            kdp.kBind( 'playerReady', function () {
                kdp.sendNotification("loadExternalClosedCaptions", {
                    languages: [{
                        "language": "Hebrew",
                        "languageCode": "he",
                        "isDefault": true,
                        "label": "Hebrew",
                        "type": "vtt",
                        "src": "http://localhost/test1.vtt",
                        "fileExt": "vtt"
                    },{
                        "language": "English",
                        "languageCode": "gg",
                        "isDefault": true,
                        "label": "English",
                        "type": "vtt",
                        "src": "http://localhost/test.vtt",
                        "fileExt": "vtt"

                    }]
                });
            });
        }
    });
//kWidget.embed({
//    "targetId": "kaltura_player_1453904613",
//    "wid": "_",
//    "uiconf_id": "8413350",
//    "flashvars": {
//        "multiDrm": {
//            "plugin": true
//        },
//        "audioSelector": {
//            "plugin": true
//        },
//        "autoPlay": true,
//        "mediaProxy.mediaPlayFrom": 0,
//        "proxyData": {
//            "initObj": {
//                "Locale": {
//                    "LocaleLanguage": "",
//                    "LocaleCountry": "",
//                    "LocaleDevice": "",
//                    "LocaleUserState": "Unknown"
//                },
//                "Platform": "Web",
//                "SiteGuid": "",
//                "DomainID": "0",
//                "UDID": "",
//                "ApiUser": "tvpapi_198",
//                "ApiPass": "11111"
//            },
//            "MediaID": 437800,
//            "iMediaID": 437800,
//            "picSize": "900x1600",
//            "config": {
//                "flavorassets": {
//                    "filters": {
//                        "include": {
//                            "Format": [
//                                "Web_HD_Dash"
//                            ]
//                        }
//                    }
//                },
//                "baseentry": {
//                    "vars": {
//                        "isTrailer": "false"
//                    }
//                }
//            }
//        },
//        "inlineScript": false
//    },
//    "entry_id": 437800,
//    "isHTML5": true
//});
</script>
</body>
</html>