<!DOCTYPE HTML>
<html>
<head>
	<title>Player Buffer Test</title>
	<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
	<script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
	<script type="text/javascript">
		function jsKalturaPlayerTest( videoId ){
			// Name this module
			module( "Buffer" );
			var kdp = $( '#' + videoId ).get(0);

			test( "Add buffer listeners", function() {
				kdp.kBind( 'bufferStartEvent', 'testBufferStartEvent' );
				kdp.kBind( 'bufferEndEvent', 'testBufferEndEvent' );
				ok( true, "Added buffer listeners" );
				// Start playback after 1 second:
				setTimeout( function(){
					kdp.sendNotification( 'doPlay' );
				}, 2000 );
			});

			window['testBufferStartEvent'] = function( eventData ){
				test( "bufferStartEvent", function(){
					ok( true, "Received bufferStartEvent");
				});
			};
			window['testBufferEndEvent'] = function( eventData ){
				test( "bufferEndEvent", function(){
					ok( true, "Received bufferEndEvent");
				});
			};
		}
	</script>
	<!-- qunit-kaltura must come after qunit-bootstrap.js and after mwEmbedLoader.php and after any jsCallbackReady stuff-->
	<script type="text/javascript" src="resources/qunit-kaltura-bootstrap.js"></script>
</head>
<body>
<h1>Player Buffer Test</h1>
<br />
<div id="kaltura_player" style="width: 585px; height: 330px;float: left;"></div>
<br style="clear: both;" /><br />
<script>
	kWidget.featureConfig({
		'targetId': 'kaltura_player',
		'wid': '_243342',
		'uiconf_id' : '21099702',
		'flashvars': {
			"confFilePath": "{libPath}/modules/KalturaSupport/tests/confFiles/jsonConfig.json",
			"related.playlistId": "1_qui13sz2"
		},
		"entry_id": "0_c0r624gh"
	});
</script>

</body>
</html>