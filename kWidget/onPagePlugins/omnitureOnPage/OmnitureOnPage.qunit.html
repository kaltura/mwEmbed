<!DOCTYPE HTML>
<html>
<head>
	<title>Omniture on page SiteCatalyst 15</title>
	<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
	<script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
	<script type="text/javascript">	
	//Enable uiconf js which includes external resources ( not needed if resources are defined in uiConf )
	mw.setConfig('Kaltura.EnableEmbedUiConfJs', true);
	
	function jsKalturaPlayerTest( videoId ){
		// Name this module
		module( "Omniture page test" );
	}
	</script>
	<!-- qunit-kaltura must come after qunit-bootstrap.js and after mwEmbedLoader.php and after any jsCallbackReady stuff-->
	<script type="text/javascript" src="../../../modules/KalturaSupport/tests/resources/qunit-kaltura-bootstrap.js"></script>
</head>
<body>
<h2> Omniture On Page, SiteCatalyst 15</h2>
<div id="kaltura_player" style="width:500px;height:310px;"></div>
<script>
kWidget.featureConfig({
	'targetId' : 'kaltura_player',
	'wid' : '_243342',
	'uiconf_id' : '2877502',
	'entry_id' : '1_zm1lgs13',
	'flashvars': {
		'omnitureOnPage' :{
			'plugin': true,
			'path' : "/content/uiconf/ps/kaltura/kdp/v3.6.9/plugins/facadePlugin.swf",
			'relativeTo': 'video',
			'position': 'before',
			'includeInLayout':false,

			'requiresJQuery' : true,
			
			'onPageJs1': "{onPagePluginPath}/omnitureOnPage/resources/omnitureOnPage.js",
			
			's_codeUrl':  "resources/adobe_sample_s_code.js",
			's_codeVarName': 's',
			'trackEventMonitor': 'omnitureTrackingLog',

			'customEvents': "openFullScreen,closeFullScreen",
			'openFullScreenEvent': "event50",
			'openFullScreenEvar1': "eVar50",
			'openFullScreenEvar1Value': "{mediaProxy.entry.id}",
			'openFullScreenEvar2': "eVar51",
			'openFullScreenEvar2Value': "{mediaProxy.entry.name}",
			'openFullScreenProp1': "prop50",
			'openFullScreenProp1Value': "{configProxy.flashvars.referer}",
			'closeFullScreenEvent': "event40",
			'closeFullScreenEvar1': "eVar40",
			'closeFullScreenEvar1Value': "{mediaProxy.entry.id}",
			'closeFullScreenEvar2': "eVar41",
			'closeFullScreenEvar2Value': "{mediaProxy.entry.name}",
			'closeFullScreenProp1': "prop40",
			'closeFullScreenProp1Value': "{configProxy.flashvars.referer}"
		}
	}
});
</script>
<br>
<p>Event log for Omniture dispatch events. You can also monitor your network console.  </p>
<textarea id="omnitureTracking" style="width:700px;height:250px;"></textarea>
<script>
window['omnitureTrackingLog'] = function( eventStr ){
	$('#omnitureTracking').append( eventStr + "\n");
}
</script>
</body>
</html>
