<!DOCTYPE HTML>
<html>
<head>
	<title>Omniture on page SiteCatalyst 15</title>
	<script type="text/javascript" src="../../../tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="../../../mwEmbedLoader.php"></script>
	<script type="text/javascript" src="../../../docs/js/doc-bootstrap.js"></script>
	<script type="text/javascript">	
	//Enable uiconf js which includes external resources ( not needed if resources are defined in uiConf )
	mw.setConfig('Kaltura.EnableEmbedUiConfJs', true);
	
	function jsKalturaPlayerTest( videoId ){
		// Name this module
		module( "Omniture page test" );
	}
	</script>
	<!-- qunit-kaltura must come after qunit-bootstrap.js and after mwEmbedLoader.php and after any jsCallbackReady stuff-->
	<script type="text/javascript" src="../../../modules/KalturaSupport/tests/resources/qunit-kaltura-bootstrap.js"></script>
</head>
<body>
<h2> Omniture sCode Config, SiteCatalyst 15</h2>
<div id="kaltura_player" style="width:500px;height:310px;"></div>
<div id="kdoc-more-desc"><img src="resources/omniture_screen_shot.png" style="float:left;height:200px;padding:5px;">
<p>Analytics are a key component of a successful video strategy. Many elements can influece your viewers, the content
itsef, the player experience, the web page context, the way you handle ad insertion, the quality of playback, and
more. In order to test and learn different strategies it is critical to track your viewers interaction with your content:
What are your viewers watching? What keeps them engaged? When are they more likely to share content? When do
they drop off? With the right information on hand you can truly understand what is driving your audiences behavior
and test different strategies to maximize engagement and create an effective monetization strategy.</p>

<p>Using the Omniture SiteCatalyst plugin for Kaltura, you can pull video analytics directly from Kalturas player into
SiteCatalyst. The plugin is already in use by some of our leading customers</p>

<p>The Omniture SiteCatalyst plugin for Kaltura tracks user interaction with the player, including video views, share
events, expanding/closing full screen, replaying, and more.</p>

<p>To start working with the plugin all you need to do is configure the relevant Omniture plugin parameters in the Kaltura
Management Console player studio. You can either use the standard configuration or have our experts work with you
to help realize your analytics goals.</p>
</div>

<script>

    var overrideFunction = function(){
        var o = {'s_account' : 'baligom'};
        return o;
    }

kWidget.featureConfig({
	'targetId' : 'kaltura_player',
	'wid' : '_243342',
	'uiconf_id' : '2877502',
	'entry_id' : '1_zm1lgs13',
	'flashvars': {
		'omnitureOnPage' :{
			'plugin': true,
			'path' : "/content/uiconf/ps/kaltura/kdp/v3.6.9/plugins/facadePlugin.swf",
			'relativeTo': 'video',
			'position': 'before',
			'includeInLayout':false,

			'loadInIframe':true,
			
			'onPageJs1': "{onPagePluginPath}/omnitureOnPage/resources/omnitureOnPage.js",
			
			's_codeUrl':  "resources/adobe_sample_s_code.js",
			's_codeVarName': 's',
			'trackEventMonitor': 'omnitureTrackingLog',

			'monitorEventInterval': 10,
			's_codeConfigFunc' : 'overrideFunction' ,
			'customEvents': "openFullScreen,closeFullScreen",
			'openFullScreenEvent': "event50",
			'openFullScreenEvar1': "eVar50",
			'openFullScreenEvar1Value': "{mediaProxy.entry.id}",
			'openFullScreenEvar2': "eVar51",
			'openFullScreenEvar2Value': "{mediaProxy.entry.name}",
			'openFullScreenProp1': "prop50",
			'openFullScreenProp1Value': "{configProxy.flashvars.referer}",
			'closeFullScreenEvent': "event40",
			'closeFullScreenEvar1': "eVar40",
			'closeFullScreenEvar1Value': "{mediaProxy.entry.id}",
			'closeFullScreenEvar2': "eVar41",
			'closeFullScreenEvar2Value': "{mediaProxy.entry.name}",
			'closeFullScreenProp1': "prop40",
			'closeFullScreenProp1Value': "{configProxy.flashvars.referer}",

			'additionalEvarsAndProps': "eVar51,prop44",
			'additionalEvarsAndPropsValues': "{mediaProxy.entry.creatorId},{mediaProxy.entry.createdAt}"
		}
	}
});
</script>


<br>
<p>Event log for Omniture dispatch events. You can also monitor your network console.  </p>
<textarea id="omnitureTracking" style="width:700px;height:250px;"></textarea>
<script>
window['omnitureTrackingLog'] = function( eventStr, eventPayload ){
	$t = $('#omnitureTracking');
	$t.append( eventStr );
	if( eventPayload ){
		$t.append( ": " + JSON.stringify( eventPayload ) );
	}
	$t.append( "\n" );
}
</script>
</body>
</html>
